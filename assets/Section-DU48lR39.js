import{d as S,j as y,h as E,k as D,c as _,n as N,a as n,t as f,l as v,u as d,o as p,_ as w,m as h,e as g,w as M,b as x,p as O,q as R,s as m,g as H,f as I}from"./index-DKHQZX0G.js";import{u as W,S as T}from"./SectionChapters-hJVxH0Ec.js";import{c as k}from"./courses-CFchmNW1.js";const $={renew(l){return JSON.parse(JSON.stringify(l))},generateDomId(){return window.crypto.randomUUID()},getHumanReadableDate(l){const r=new Date(l.replace(" ","T")),a=new Date().getTime()-r.getTime(),c=Math.floor(a/1e3),s=Math.floor(c/60),t=Math.floor(s/60),e=Math.floor(t/24),u=Math.floor(e/30),i=Math.floor(e/365);return isNaN(r.getTime())?"(N/A)":c<60?"방금 전":s<60?`${s}분 전`:t<24?`${t}시간 전`:e<30?`${e}일 전`:u<12?`${u}개월 전`:`${i}년 전`}},B={class:"header"},L={class:"top"},Y={class:"chapter"},z={class:"title"},V={class:"date"},J=["title"],P=["title"],U={class:"content"},j=["innerHTML"],q=S({__name:"SectionCore",props:{courseId:{},chapterId:{},sectionId:{},onMounted:{type:Function}},setup(l){const r=l,o=y({loaded:!1,title:"WAIT",content:"<p>PLEASE WAIT A MOMENT</p>",created:"WAIT A MOMENT",updated:"WAIT A MOMENT",courseTitle:"WAIT",chapterTitle:"WAIT"});return E(async()=>{k.forEach(a=>{if(a.id===r.courseId){a.chapters.forEach(c=>{if(c.id===r.chapterId){c.sections.forEach(async s=>{if(s.id===r.sectionId){const{html:t}=await s.read();o.loaded=!0,o.title=s.title,o.content=t,o.created=s.created,o.updated=s.updated,o.courseTitle=a.title,o.chapterTitle=c.title;return}});return}});return}})}),D(()=>{r.onMounted()}),(a,c)=>(p(),_("div",{class:N(["section-core",{skeleton:!o.loaded}])},[n("div",B,[n("div",L,[n("span",Y,f(o.chapterTitle),1)]),n("div",z,[n("span",null,f(o.title),1)]),n("div",V,[n("span",{title:o.created}," 생성: "+f(d($).getHumanReadableDate(o.created)),9,J),o.created!==o.updated?(p(),_("span",{key:0,title:o.updated}," 수정: "+f(d($).getHumanReadableDate(o.updated)),9,P)):v("",!0)])]),n("div",U,[n("div",{innerHTML:o.content},null,8,j)])],2))}}),F=w(q,[["__scopeId","data-v-020845c7"]]),G="/assets/images/common.angle.left.svg",K="/assets/images/common.angle.right.svg",Q={class:"wrapper"},X={class:"title"},Z={class:"title"},tt=S({__name:"SectionNavigation",props:{courseId:{},chapterId:{},sectionId:{}},setup(l){const r=l,o=h(()=>{const s=[];return k.forEach(t=>{t.chapters.forEach(e=>{e.sections.forEach(u=>{s.push({id:u.id,title:u.title,url:`/courses/${t.id}/${e.id}/${u.id}`})})})}),s}),a=h(()=>{let s=null;const t=o.value;for(let e=0;e<t.length;e++)t[e].id===r.sectionId&&(s=t[e-1]);return s}),c=h(()=>{let s=null;const t=o.value;for(let e=0;e<t.length;e++)t[e].id===r.sectionId&&(s=t[e+1]);return s});return(s,t)=>{const e=x("router-link");return p(),_("div",{class:N(["chapters",{both:d(a)&&d(c)}])},[n("div",Q,[d(a)?(p(),g(e,{key:0,to:d(a).url||"",class:"item prev",title:d(a).title},{default:M(()=>[t[0]||(t[0]=n("div",{class:"label"},[n("img",{src:G,alt:"이전"}),n("span",null,"이전")],-1)),n("div",X,f(d(a).title),1)]),_:1},8,["to","title"])):v("",!0),d(c)?(p(),g(e,{key:1,to:d(c).url,class:"item next",title:d(c).title},{default:M(()=>[t[1]||(t[1]=n("div",{class:"label"},[n("img",{src:K,alt:"다음"}),n("span",null,"다음")],-1)),n("div",Z,f(d(c).title),1)]),_:1},8,["to","title"])):v("",!0)])],2)}}}),et=w(tt,[["__scopeId","data-v-87054633"]]),ot={class:"section"},st={class:"chapters"},nt={class:"main"},ct={class:"navigation"},at={class:"chapters d-block d-sm-none"},rt=S({__name:"Section",setup(l){const r=H(),o=O(),a=R(),c=W(),s=m(()=>{var i;return(i=r.params.courseId)==null?void 0:i.toString()}),t=m(()=>{var i;return(i=r.params.chapterId)==null?void 0:i.toString()}),e=m(()=>{var i;return(i=r.params.sectionId)==null?void 0:i.toString()}),u=()=>{if(o.value){if(c.scrollAction==="none")return;if(a.windowSize.width>767&&(window.scrollY||window.pageYOffset)<a.windowSize.height/10)return}else return;const C=o.value.getBoundingClientRect().top+window.pageYOffset+-12,b=c.scrollAction==="smooth"?"smooth":void 0;window.scrollTo({top:C,behavior:b})};return(i,A)=>(p(),_("div",ot,[n("div",st,[I(T,{courseId:s.value,chapterId:t.value,sectionId:e.value},null,8,["courseId","chapterId","sectionId"])]),n("div",nt,[n("div",{class:"core",ref_key:"coreRef",ref:o},[(p(),g(F,{courseId:s.value,chapterId:t.value,sectionId:e.value,key:e.value,onMounted:u},null,8,["courseId","chapterId","sectionId"]))],512),n("div",ct,[I(et,{courseId:s.value,chapterId:t.value,sectionId:e.value},null,8,["courseId","chapterId","sectionId"])])]),n("div",at,[I(T,{courseId:s.value,chapterId:t.value,sectionId:e.value},null,8,["courseId","chapterId","sectionId"])])]))}}),pt=w(rt,[["__scopeId","data-v-4ae0ed10"]]);export{pt as default};
