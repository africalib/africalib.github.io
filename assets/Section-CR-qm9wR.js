import{f as g,m as v,c as f,n as $,b as t,o as p,_ as S,p as D,k as H,j as k,t as _,u as l,F as U,d as I,q as T,h as C,w as M,r as E,s as B,v as O,x as y,i as W,y as L}from"./index-y9xwffIy.js";import{c as b}from"./courses-C8YkE50g.js";import{C as V}from"./Chapters-BCWI9Dxa.js";const z="/assets/images/common.home.white.svg",N={renew(d){return JSON.parse(JSON.stringify(d))},generateDomId(){return window.crypto.randomUUID()},getHumanReadableDate(d){const c=new Date(d.replace(" ","T")),a=new Date().getTime()-c.getTime(),r=Math.floor(a/1e3),o=Math.floor(r/60),s=Math.floor(o/60),n=Math.floor(s/24),u=Math.floor(n/30),m=Math.floor(n/365);return isNaN(c.getTime())?"(N/A)":r<60?"방금 전":o<60?`${o}분 전`:s<24?`${s}시간 전`:n<30?`${n}일 전`:u<12?`${u}개월 전`:`${m}년 전`}},F=["innerHTML"],J=g({__name:"SectionCoreContent",props:{content:{},skeleton:{type:Boolean}},setup(d){const c=d,e=v(()=>{const a=/(\bhttps?:\/\/[^\s<>"')\]]+)/g;return c.content.replace(a,(r,o)=>c.content.includes(`<a href="${o}"`)||c.content.includes(`<a href='${o}'`)?r:`<a href="${o}" target="_blank" rel="noopener noreferrer">${o}</a>`)});return(a,r)=>(p(),f("div",{class:$(["section-core-content",{skeleton:c.skeleton}])},[t("div",{innerHTML:e.value},null,8,F)],2))}}),P=S(J,[["__scopeId","data-v-f5332d7d"]]),j=g({__name:"SectionCoreVideo",props:{url:{},skeleton:{type:Boolean}},setup(d){const c=d;return(e,a)=>(p(),f("div",{class:$(["section-core-video",{skeleton:c.skeleton}])},a[0]||(a[0]=[t("div",{class:"wrapper"},[t("div",{class:"inner"})],-1)]),2))}}),q=S(j,[["__scopeId","data-v-6d707307"]]),G={class:"header"},Y={class:"top"},K={class:"chapter"},Q={class:"title"},X={class:"date"},Z=["title"],ee=["title"],te={key:0,class:"video"},oe={class:"content"},se=g({__name:"SectionCore",props:{courseId:{},chapterId:{},sectionId:{}},setup(d){const c=d,e=D({loaded:!1,title:"WAIT A MOMENT",videoUrl:null,content:"<p>PLEASE WAIT A MOMENT</p>",created:"WAIT A MOMENT",updated:"WAIT A MOMENT",courseTitle:"WAIT",chapterTitle:"WAIT"});return H(async()=>{b.forEach(a=>{if(a.id===c.courseId){a.chapters.forEach(r=>{if(r.id===c.chapterId){r.sections.forEach(async o=>{if(o.id===c.sectionId){const{html:s}=await o.read();e.loaded=!0,e.title=o.title,e.videoUrl=o.videoUrl,e.content=s,e.created=o.created,e.updated=o.updated,e.courseTitle=a.title,e.chapterTitle=r.title;return}});return}});return}})}),(a,r)=>(p(),f("div",{class:$(["section-core",{skeleton:!e.loaded}])},[t("div",G,[t("div",Y,[t("span",K,_(e.chapterTitle),1)]),t("div",Q,[t("span",null,_(e.title),1)]),t("div",X,[t("span",{title:e.created}," 생성: "+_(l(N).getHumanReadableDate(e.created)),9,Z),e.created!==e.updated?(p(),f(U,{key:0},[r[0]||(r[0]=t("span",{class:"bar"},null,-1)),t("span",{title:e.updated}," 수정: "+_(l(N).getHumanReadableDate(e.updated)),9,ee)],64)):k("",!0)])]),e.videoUrl!==null?(p(),f("div",te,[I(q,{url:e.videoUrl,skeleton:!e.loaded},null,8,["url","skeleton"])])):k("",!0),t("div",oe,[I(P,{content:e.content,skeleton:!e.loaded},null,8,["content","skeleton"])])],2))}}),ne=S(se,[["__scopeId","data-v-c2009eda"]]),ae="/assets/images/common.angle.left.svg",re="/assets/images/common.angle.right.svg",ce={class:"wrapper"},ie={class:"title"},le={class:"title"},de=g({__name:"SectionNavigation",props:{courseId:{},chapterId:{},sectionId:{}},setup(d){const c=d,e=T(()=>{const o=[];return b.forEach(s=>{s.chapters.forEach(n=>{n.sections.forEach(u=>{o.push({id:u.id,title:u.title,url:`/courses/${s.id}/${n.id}/${u.id}`})})})}),o}),a=T(()=>{let o=null;const s=e.value;for(let n=0;n<s.length;n++)s[n].id===c.sectionId&&(o=s[n-1]);return o}),r=T(()=>{let o=null;const s=e.value;for(let n=0;n<s.length;n++)s[n].id===c.sectionId&&(o=s[n+1]);return o});return(o,s)=>{const n=E("router-link");return p(),f("div",{class:$(["section-navigation",{both:l(a)&&l(r)}])},[t("div",ce,[l(a)?(p(),C(n,{key:0,to:l(a).url||"",class:"item prev",title:l(a).title},{default:M(()=>[s[0]||(s[0]=t("div",{class:"label"},[t("img",{src:ae,alt:"이전"}),t("span",null,"이전")],-1)),t("div",ie,_(l(a).title),1)]),_:1},8,["to","title"])):k("",!0),l(r)?(p(),C(n,{key:1,to:l(r).url,class:"item next",title:l(r).title},{default:M(()=>[s[1]||(s[1]=t("div",{class:"label"},[t("img",{src:re,alt:"다음"}),t("span",null,"다음")],-1)),t("div",le,_(l(r).title),1)]),_:1},8,["to","title"])):k("",!0)])],2)}}}),ue=S(de,[["__scopeId","data-v-036566f9"]]),pe={class:"section"},_e={class:"container"},fe={class:"wrapper"},me={class:"main"},he={class:"navigation"},ve=g({__name:"Section",setup(d){const c=B(),e=O(),a=W(),r=y(),o=y(),s=y(),n=v(()=>{var i;return(i=a.params.courseId)==null?void 0:i.toString()}),u=v(()=>{var i;return(i=a.params.chapterId)==null?void 0:i.toString()}),m=v(()=>{var i;return(i=a.params.sectionId)==null?void 0:i.toString()}),x=v(()=>b.find(i=>i.id===n.value)),A=i=>{var h;c.windowSize.width<=1399||s.value&&s.value.scrollTo({top:i-s.value.offsetTop-(((h=o.value)==null?void 0:h.offsetHeight)||0),behavior:"smooth"})};return(i,h)=>{const R=E("router-link");return p(),f("div",pe,[t("div",_e,[t("div",fe,[t("div",me,[t("div",{class:"core",ref_key:"coreRef",ref:r},[(p(),C(ne,{courseId:n.value,chapterId:u.value,sectionId:m.value,key:m.value},null,8,["courseId","chapterId","sectionId"]))],512),t("div",he,[I(ue,{courseId:n.value,chapterId:u.value,sectionId:m.value},null,8,["courseId","chapterId","sectionId"])])]),t("div",{class:"chapters",ref_key:"chaptersRef",ref:s,style:L({height:l(e).mainHeight})},[t("div",{class:"top",ref_key:"chaptersTopRef",ref:o},[I(R,{to:`/courses/${n.value}`,class:"btn"},{default:M(()=>{var w;return[h[0]||(h[0]=t("img",{src:z},null,-1)),t("span",null,_((w=x.value)==null?void 0:w.title),1)]}),_:1},8,["to"])],512),I(V,{courseId:n.value,chapterId:u.value,sectionId:m.value,theme:"light",onScrollable:A},null,8,["courseId","chapterId","sectionId"])],4)])])])}}}),ke=S(ve,[["__scopeId","data-v-dbf28737"]]);export{ke as default};
