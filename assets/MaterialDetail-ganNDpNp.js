import{_ as W,a as ne}from"./common.angle.right-BBQDf25P.js";import{d as C,c as m,e,F as R,r as X,t as L,g as h,o as n,_ as H,n as q,h as Y,b as S,u as P,i as z,j as I,T as re,f as b,k as w,l as Z,m as U,w as D,p as j,q as ee,s as le,v as te,x as ce,y as ie,z as ue,A as B,B as de,C as F,D as me,E as K,G as pe}from"./index-ApNn0mKX.js";import{A as _e}from"./Above-CGHUfuoz.js";import{u as N,M as V}from"./material-DSUToPpE.js";import{T as ve}from"./Tags-BPiqCVM9.js";import{c as x}from"./commonLib-B4LiHA7t.js";import{C as he}from"./CryptoHelper-m6j8gmxG.js";import"./Panel-CSvds0u5.js";const fe="/assets/images/common.home.white.svg",ge={class:"common-sources"},ye={class:"items"},ke={class:"item"},$e=["innerHTML"],be=C({__name:"MaterialSources",props:{sources:{}},setup(_){const a=_;return(c,y)=>(n(),m("div",ge,[y[0]||(y[0]=e("div",{class:"subject"},"자료 출처",-1)),e("div",ye,[(n(!0),m(R,null,X(a.sources,(f,r)=>(n(),m("div",ke,[e("span",null,"["+L(r+1)+"] ",1),e("span",{innerHTML:h(x).linkify(f)},null,8,$e)]))),256))])]))}}),se=H(be,[["__scopeId","data-v-3b532ca9"]]),Se={class:"common-references"},Te={class:"items"},we={class:"item"},Me=C({__name:"MaterialReferences",props:{references:{}},setup(_){const a=_;return(c,y)=>(n(),m("div",Se,[y[0]||(y[0]=e("div",{class:"subject"},"참고 자료",-1)),e("div",Te,[(n(!0),m(R,null,X(a.references,f=>(n(),m("div",we,[e("span",null,L(f),1)]))),256))])]))}}),ae=H(Me,[["__scopeId","data-v-9a0696c5"]]),xe=["innerHTML"],Le=C({__name:"DocumentContent",props:{document:{},skeleton:{type:Boolean}},setup(_){const a=_;return(c,y)=>(n(),m("div",{class:q(["document-content",{skeleton:a.skeleton}])},[e("div",{innerHTML:a.document,ref:"contentRef"},null,8,xe)],2))}}),oe=H(Le,[["__scopeId","data-v-af73dc37"]]),Ee="/assets/images/component.document.presentation.slide.first.svg",Ce="/assets/images/component.material.presentation.finish.svg",O=C({__name:"DocumentPrompt",props:{content:{}},setup(_){const a=_;return Y(()=>{console.info(a.content.replace(/\n{3,}/g,`

`))}),(c,y)=>null}}),Ae={class:"presentation"},He={class:"slides"},Ie={key:0,class:"slide start"},Re={class:"container"},De={class:"slide-item"},Pe=["innerHTML"],qe={key:1,class:"slide finish"},Ne={class:"container"},je={key:0,class:"slide"},Be={class:"container"},J="no-overflow",Fe=C({__name:"MaterialPresentation",props:{material:{},document:{}},setup(_){const a={touchStartX:0,touchStartY:0},c=_,y=P(),f=Z(),r=`이렇게 해서 ${x.extractText(c.material.title)}에 대해 알아봤습니다. 수고하셨습니다!`,i=S(()=>c.material.title.replace(/\*\*(.*?)\*\*/g,"<b>$1</b>")),v=S(()=>{const d=[c.material.desc];return t.value.length===0&&o.value.length===1&&d.push(o.value[0]),d.join("")}),t=S(()=>{const d=new DOMParser().parseFromString(c.document,"text/html");return Array.from(d.querySelectorAll(".slide-item")).map(p=>p.outerHTML)}),o=S(()=>{const d=[],p={},s=new DOMParser().parseFromString(c.document,"text/html");Array.from(s.querySelectorAll(".slide-text")).forEach(g=>{const E=g.getAttribute("data-slide-text-group");E&&(!p[E]&&(p[E]=[]),p[E].push(x.replaceAll(g.outerText,"  ","").trim()))});for(let g in p)d.push(p[g].join(`
`));return d}),u=S(()=>{var d;return window.Number.parseInt(((d=y.query.idx)==null?void 0:d.toString())||"0")}),l=S(()=>t.value.length+1),$=d=>{const p=x.renew(y.query);let s=u.value+d;s<0?s=0:s>l.value&&(s=l.value),u.value!==s&&(p.idx=s.toString(),f.push({query:p}))},A=d=>{switch(d.key){case"ArrowLeft":!d.altKey&&$(-1);break;case"ArrowRight":!d.altKey&&$(1);break;case"F9":case"Escape":f.push({query:void 0});break}},T=d=>{const p=d.touches[0];a.touchStartX=p.clientX,a.touchStartY=p.clientY},M=d=>{const p=d.changedTouches[0],s=p.clientX,k=p.clientY,g=s-a.touchStartX,E=k-a.touchStartY;Math.abs(g)>Math.abs(E)&&Math.abs(g)>50&&(g>0?$(-1):$(1))};return Y(()=>{document.addEventListener("keyup",A),document.addEventListener("touchstart",T),document.addEventListener("touchend",M),document.body.classList.add(J)}),z(()=>{document.removeEventListener("keyup",A),document.removeEventListener("touchstart",T),document.removeEventListener("touchend",M),document.body.classList.remove(J)}),(d,p)=>(n(),I(re,{to:"body"},[e("div",Ae,[e("div",He,[u.value===0?(n(),m("div",Ie,[e("div",Re,[e("figure",De,[p[0]||(p[0]=e("img",{src:Ee,alt:"코딩",loading:"lazy"},null,-1)),e("figcaption",null,[e("span",{innerHTML:i.value},null,8,Pe),b(O,{content:v.value},null,8,["content"])])])])])):u.value===l.value?(n(),m("div",qe,[e("div",Ne,[p[1]||(p[1]=e("figure",{class:"slide-item"},[e("img",{src:Ce,alt:"하이파이브",class:"mh-400",loading:"lazy"}),e("figcaption",null,[e("b",null,"이상 끝. "),e("span",null,"수고하셨습니다!")])],-1)),c.material.sources.length?(n(),I(se,{key:0,class:"w-100 mb-3",sources:c.material.sources},null,8,["sources"])):w("",!0),c.material.references.length?(n(),I(ae,{key:1,class:"w-100",references:c.material.references},null,8,["references"])):w("",!0),b(O,{content:r})])])):(n(!0),m(R,{key:2},X(t.value.length,s=>(n(),m(R,null,[u.value===s?(n(),m("div",je,[e("div",Be,[b(oe,{document:t.value[s-1]},null,8,["document"]),b(O,{content:o.value[s-1]||""},null,8,["content"])])])):w("",!0)],64))),256))])])]))}}),Oe=H(Fe,[["__scopeId","data-v-56f6ed8a"]]),Xe="/assets/images/component.material.core.presentation.svg",Ye={class:"wrapper"},ze={class:"title"},Ue={class:"desc"},Ge={class:"date"},Ke=["title"],Ve=["title"],Je={key:0,class:"side"},Q="?mode=presentation",Qe=C({__name:"MaterialHeader",props:{material:{},accessible:{type:Boolean},skeleton:{type:Boolean}},setup(_){const a=_,c=P(),y=Z();N(c);const f=r=>{r.key==="F9"&&y.push(Q)};return Y(()=>{document.addEventListener("keyup",f)}),z(()=>{document.removeEventListener("keyup",f)}),(r,i)=>{const v=U("router-link");return n(),m("div",{class:q(["material-header",{skeleton:a.skeleton}])},[e("div",Ye,[e("div",ze,[e("span",null,L(h(x).extractText(r.material.title)),1)]),e("div",Ue,[e("span",null,L(r.material.desc),1)]),e("div",Ge,[e("span",{title:r.material.created}," 생성: "+L(h(x).getHumanReadableDate(r.material.created)),9,Ke),r.material.created!==r.material.updated?(n(),m(R,{key:0},[i[0]||(i[0]=e("span",{class:"bar"},null,-1)),e("span",{title:r.material.updated}," 수정: "+L(h(x).getHumanReadableDate(r.material.updated)),9,Ve)],64)):w("",!0)])]),r.material.presentation&&a.accessible?(n(),m("div",Je,[b(v,{to:Q},{default:D(()=>i[1]||(i[1]=[e("img",{src:Xe,alt:"발표"},null,-1),e("div",null,"발표 (F9)",-1)])),_:1})])):w("",!0)],2)}}}),We=H(Qe,[["__scopeId","data-v-4dc643e4"]]);function Ze(){const _=j(null),a=j(null),c=j(!1);return{data:_,error:a,loading:c,request:async({url:f,method:r="GET",body:i,contentType:v="application/json",...t})=>{c.value=!0,a.value=null;try{const o={"Content-Type":v,...t.headers||{}},u={method:r,headers:o,...t};i&&(u.body=v==="application/json"?JSON.stringify(i):i);const l=await fetch(f,u);if(!l.ok)throw new Error(`HTTP error! status: ${l.status}`);const $=l.headers.get("Content-Type");return $!=null&&$.includes("application/json")?_.value=await l.json():_.value=await l.text(),_.value}catch(o){throw a.value=o.message||"Unknown error",o}finally{c.value=!1}}}}const et={class:"presentation"},tt={class:"header"},st={class:"content"},at={key:1},ot=C({__name:"MaterialCore",props:{material:{},onDocumentLoaded:{type:Function}},setup(_){const a=P(),c=ee(),y=le(),f=N(a),{data:r,loading:i,request:v}=Ze(),t=_,o=te({document:"<p>PLEASE WAIT A MOMENT</p>",accessible:!1}),u=()=>{if(!t.material.sources.length)return;const $=new DOMParser().parseFromString(o.document,"text/html");Array.from($.querySelectorAll("[data-bs-toggle='popover']")).forEach((T,M)=>{if(!t.material.sources[M]){console.error("본문 속 팝오버의 개수와 출처 배열의 개수가 다릅니다.");return}T.setAttribute("title","자료 출처"),T.setAttribute("data-bs-content",x.linkify(t.material.sources[M])),T.innerText=`[${M+1}]`}),o.document=$.body.innerHTML},l=async()=>{const $=window.location.hostname==="localhost";if(o.accessible=t.material.locked?y.admin:!0,o.accessible){const A=f.getUrlPath(t.material);await v({url:`/assets${A}/document.html?${Date.now()}`,contentType:"text/html"});const T=ue.get(B.unlockPasswordCookieName);if(t.material.locked&&T&&!$){const M=new he(T,B.salt,B.iv);r.value=await M.decrypt(r.value).catch(d=>(console.error({err:d,message:"문서를 복호화 할 수 없습니다."}),null))}o.document=x.linkify(r.value),u()}de(()=>{t.onDocumentLoaded()}),c.updateSiteTitle(x.extractText(t.material.title))};return ce(()=>{l()}),z(()=>{c.updateSiteTitle()}),ie(()=>a.path,()=>{l()}),($,A)=>(n(),m("div",{class:q(["material-core",{skeleton:h(i)}])},[e("div",et,[h(a).query.mode==="presentation"&&!h(i)&&o.accessible?(n(),I(Oe,{key:0,material:t.material,document:o.document},null,8,["material","document"])):w("",!0)]),e("div",tt,[b(We,{material:t.material,accessible:o.accessible,skeleton:h(i)},null,8,["material","accessible","skeleton"])]),e("div",st,[o.accessible?(n(),I(oe,{key:0,document:o.document,skeleton:h(i)},null,8,["document","skeleton"])):(n(),m("div",at,"조회 가능한 문서가 없습니다."))])],2))}}),nt=H(ot,[["__scopeId","data-v-b1996c62"]]),rt={class:"wrapper"},lt={class:"title"},ct={class:"title"},it=C({__name:"MaterialNavigation",props:{material:{}},setup(_){const a=_,c=P(),y=N(c),f=F(()=>{var t;const v=[];return a.material&&((t=a.material.parent)==null||t.children.forEach(o=>{const u=y.getUrlPath(o);v.push({id:o.id,title:x.extractText(o.title),url:u})})),v}),r=F(()=>{var o;let v=null;const t=f.value;for(let u=0;u<t.length;u++)if(t[u].id===((o=a.material)==null?void 0:o.id)){v=t[u-1];break}return v}),i=F(()=>{var o;let v=null;const t=f.value;for(let u=0;u<t.length;u++)if(t[u].id===((o=a.material)==null?void 0:o.id)){v=t[u+1];break}return v});return(v,t)=>{const o=U("router-link");return n(),m("div",{class:q(["material-navigation",{both:h(r)&&h(i)}])},[e("div",rt,[h(r)?(n(),I(o,{key:0,to:h(r).url||"",class:"item prev",title:h(r).title},{default:D(()=>[t[0]||(t[0]=e("div",{class:"label"},[e("img",{src:W,alt:"이전"}),e("span",null,"이전")],-1)),e("div",lt,L(h(r).title),1)]),_:1},8,["to","title"])):w("",!0),h(i)?(n(),I(o,{key:1,to:h(i).url,class:"item next",title:h(i).title},{default:D(()=>[t[1]||(t[1]=e("div",{class:"label"},[e("img",{src:ne,alt:"다음"}),e("span",null,"다음")],-1)),e("div",ct,L(h(i).title),1)]),_:1},8,["to","title"])):w("",!0)])],2)}}}),ut=H(it,[["__scopeId","data-v-1831093f"]]),dt={class:"material"},mt={class:"container"},pt={key:0,class:"list"},_t={class:"above"},vt={class:"back"},ht={class:"tags"},ft={key:1,class:"detail"},gt={class:"main"},yt={class:"core",ref:"coreRef"},kt={key:0,class:"sources"},$t={key:1,class:"references"},bt={class:"navigation"},St=C({__name:"MaterialDetail",setup(_){const a=P(),c=ee(),y=me(),f=N(a),r=K("materialsTopRef"),i=K("materialsRef"),v=te({contentLoaded:!1}),t=S(()=>{var s;return(s=a.params.id1)==null?void 0:s.toString()}),o=S(()=>{var s;return(s=a.params.id2)==null?void 0:s.toString()}),u=S(()=>{var s;return(s=a.params.id3)==null?void 0:s.toString()}),l=S(()=>f.get(t.value,o.value,u.value)),$=S(()=>{var s,k;return((k=(s=l.value)==null?void 0:s.parent)==null?void 0:k.children)||[]}),A=S(()=>{var k;const s=new Set;return s.add(void 0),(k=f.get(t.value))==null||k.tags.forEach(g=>s.add(g)),s}),T=S(()=>{if(a.query.tag)return window.decodeURIComponent(a.query.tag.toString())}),M=S(()=>{var k;const s={title:"강의 자료 목록",url:"/materials"};if(o.value||u.value){const g=(k=l.value)==null?void 0:k.parent;g&&(s.title=g.title,s.url=g.url)}return s}),d=s=>{var k,g;c.windowSize.width<=1399||(g=i.value)==null||g.scrollTo({top:s-i.value.offsetTop-(((k=r.value)==null?void 0:k.offsetHeight)||0),behavior:"smooth"})},p=()=>{v.contentLoaded=!0};return(s,k)=>{var E;const g=U("router-link");return n(),m("div",dt,[e("div",mt,[l.value?(n(),m(R,{key:0},[l.value.children.length?(n(),m("div",pt,[e("div",_t,[e("div",vt,[b(g,{to:M.value.url},{default:D(()=>[k[0]||(k[0]=e("img",{src:W,alt:"뒤로가기"},null,-1)),e("span",null,L(M.value.title),1)]),_:1},8,["to"])]),b(_e,{title:l.value.title,desc:l.value.desc},null,8,["title","desc"])]),e("div",ht,[b(ve,{tags:A.value,tag:T.value},null,8,["tags","tag"])]),b(V,{materials:l.value.children,tag:T.value},null,8,["materials","tag"])])):(n(),m("div",ft,[e("div",gt,[e("div",yt,[b(nt,{material:l.value,onDocumentLoaded:p},null,8,["material"])],512),!l.value.locked&&l.value.sources.length?(n(),m("div",kt,[b(se,{sources:l.value.sources},null,8,["sources"])])):w("",!0),!l.value.locked&&((E=l.value.references)!=null&&E.length)?(n(),m("div",$t,[b(ae,{references:l.value.references},null,8,["references"])])):w("",!0),e("div",bt,[b(ut,{material:l.value},null,8,["material"])])]),v.contentLoaded?(n(),m("div",{key:0,class:"materials",ref_key:"materialsRef",ref:i,style:pe({height:h(y).mainHeight})},[e("div",{class:"top",ref_key:"materialsTopRef",ref:r},[b(g,{to:`/materials/${t.value}`,class:"btn"},{default:D(()=>{var G;return[k[1]||(k[1]=e("img",{src:fe},null,-1)),e("span",null,L((G=h(f).get(t.value))==null?void 0:G.title),1)]}),_:1},8,["to"])],512),b(V,{materials:$.value,onScrollable:d},null,8,["materials"])],4)):w("",!0)]))],64)):w("",!0)])])}}}),Ht=H(St,[["__scopeId","data-v-70c77a84"]]);export{Ht as default};
