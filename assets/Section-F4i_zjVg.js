import{f as b,m as T,n as $,c as _,p as M,b as t,o as d,_ as w,q as z,k as j,s as q,v as F,j as C,t as h,u as v,F as L,d as k,x as R,h as A,w as D,r as P,g as W,y as J,z as G,i as Y,A as K}from"./index-Wba7TJEH.js";import{c as E}from"./courses-rsCxiHrF.js";import{C as Q}from"./Chapters-DkHv0gBZ.js";const X="/assets/images/common.home.white.svg",x={renew(r){return JSON.parse(JSON.stringify(r))},isNumeric(r){return!isNaN(Number(r))},generateDomId(){return window.crypto.randomUUID()},getHumanReadableDate(r){const a=new Date(r.replace(" ","T")),n=new Date().getTime()-a.getTime(),c=Math.floor(n/1e3),e=Math.floor(c/60),o=Math.floor(e/60),s=Math.floor(o/24),p=Math.floor(s/30),I=Math.floor(s/365);return isNaN(a.getTime())?"(N/A)":c<60?"방금 전":e<60?`${e}분 전`:o<24?`${o}시간 전`:s<30?`${s}일 전`:p<12?`${p}개월 전`:`${I}년 전`}},Z=["innerHTML"],ee=b({__name:"SectionCoreContent",props:{content:{},skeleton:{type:Boolean}},setup(r){const a=r,i=T(),n=$(()=>{const c=/(\bhttps?:\/\/[^\s<>"')\]]+)/g;return a.content.replace(c,(e,o)=>a.content.includes(`<a href="${o}"`)||a.content.includes(`<a href='${o}'`)?e:`<a href="${o}" target="_blank" rel="noopener noreferrer">${o}</a>`)});return(c,e)=>(d(),_("div",{class:M(["section-core-content",{skeleton:a.skeleton}]),ref_key:"rootRef",ref:i},[t("div",{innerHTML:n.value},null,8,Z)],2))}}),te=w(ee,[["__scopeId","data-v-73f7b6ca"]]),oe=b({__name:"SectionCoreVideo",props:{url:{},skeleton:{type:Boolean}},setup(r){const a=r;return(i,n)=>(d(),_("div",{class:M(["section-core-video",{skeleton:a.skeleton}])},n[0]||(n[0]=[t("div",{class:"wrapper"},[t("div",{class:"inner"})],-1)]),2))}}),se=w(oe,[["__scopeId","data-v-6d707307"]]);function V(){const r=i=>E.find(n=>n.id===i);return{getCourse:r,getSection:(i,n,c)=>{const e=r(i);if(e){const o=e.chapters.find(s=>s.id===n);if(o)return o.sections.find(s=>s.id===c)}return null}}}const ne={class:"header"},ce={class:"top"},re={class:"chapter"},ae={class:"title"},ie={class:"date"},le=["title"],de=["title"],ue={key:0,class:"video"},pe={class:"content"},_e=b({__name:"SectionCore",props:{courseId:{},chapterId:{},sectionId:{}},setup(r){const a=V(),i=r,n=T(),c=window.bootstrap,e=z({loaded:!1,title:"WAIT A MOMENT",videoUrl:null,content:"<p>PLEASE WAIT A MOMENT</p>",created:"WAIT A MOMENT",updated:"WAIT A MOMENT",courseTitle:"WAIT",chapterTitle:"WAIT"}),o=$(()=>a.getSection(i.courseId,i.chapterId,i.sectionId)),s=()=>{document.querySelectorAll('[data-bs-toggle="popover"]').forEach(f=>{const u=c.Popover.getInstance(f);u&&u.dispose()})},p=f=>{var u;if(f.tagName.toLowerCase()==="a"){const m=f;if(m.getAttribute("data-bs-toggle")){const l=m.textContent;if(l){const S=l.replace("[","").replace("]","");if(x.isNumeric(S)){const N=window.Number.parseInt(S)-1,y=(u=o.value)==null?void 0:u.sources[N];y&&(m.setAttribute("data-bs-content",y),new c.Popover(m).show())}}}}},I=f=>{p(f.target)},g=f=>{s()};return j(async()=>{E.forEach(f=>{if(f.id===i.courseId){f.chapters.forEach(u=>{if(u.id===i.chapterId){u.sections.forEach(async m=>{if(m.id===i.sectionId){const{html:l}=await m.read();e.loaded=!0,e.title=m.title,e.videoUrl=m.videoUrl,e.content=l,e.created=m.created,e.updated=m.updated,e.courseTitle=f.title,e.chapterTitle=u.title;return}});return}});return}})}),q(()=>{document.addEventListener("click",I),document.addEventListener("mousedown",g)}),F(()=>{document.removeEventListener("click",I),document.removeEventListener("mousedown",g)}),(f,u)=>(d(),_("div",{class:M(["section-core",{skeleton:!e.loaded}]),ref_key:"rootRef",ref:n},[t("div",ne,[t("div",ce,[t("span",re,h(e.chapterTitle),1)]),t("div",ae,[t("span",null,h(e.title),1)]),t("div",ie,[t("span",{title:e.created}," 생성: "+h(v(x).getHumanReadableDate(e.created)),9,le),e.created!==e.updated?(d(),_(L,{key:0},[u[0]||(u[0]=t("span",{class:"bar"},null,-1)),t("span",{title:e.updated}," 수정: "+h(v(x).getHumanReadableDate(e.updated)),9,de)],64)):C("",!0)])]),e.videoUrl!==null?(d(),_("div",ue,[k(se,{url:e.videoUrl,skeleton:!e.loaded},null,8,["url","skeleton"])])):C("",!0),t("div",pe,[k(te,{content:e.content,skeleton:!e.loaded},null,8,["content","skeleton"])])],2))}}),fe=w(_e,[["__scopeId","data-v-63c7f975"]]),me="/assets/images/common.angle.left.svg",ve="/assets/images/common.angle.right.svg",he={class:"wrapper"},Ie={class:"title"},ge={class:"title"},Se=b({__name:"SectionNavigation",props:{courseId:{},chapterId:{},sectionId:{}},setup(r){const a=r,i=R(()=>{const e=[];return E.forEach(o=>{o.chapters.forEach(s=>{s.sections.forEach(p=>{e.push({id:p.id,title:p.title,url:`/courses/${o.id}/${s.id}/${p.id}`})})})}),e}),n=R(()=>{let e=null;const o=i.value;for(let s=0;s<o.length;s++)o[s].id===a.sectionId&&(e=o[s-1]);return e}),c=R(()=>{let e=null;const o=i.value;for(let s=0;s<o.length;s++)o[s].id===a.sectionId&&(e=o[s+1]);return e});return(e,o)=>{const s=P("router-link");return d(),_("div",{class:M(["section-navigation",{both:v(n)&&v(c)}])},[t("div",he,[v(n)?(d(),A(s,{key:0,to:v(n).url||"",class:"item prev",title:v(n).title},{default:D(()=>[o[0]||(o[0]=t("div",{class:"label"},[t("img",{src:me,alt:"이전"}),t("span",null,"이전")],-1)),t("div",Ie,h(v(n).title),1)]),_:1},8,["to","title"])):C("",!0),v(c)?(d(),A(s,{key:1,to:v(c).url,class:"item next",title:v(c).title},{default:D(()=>[o[1]||(o[1]=t("div",{class:"label"},[t("img",{src:ve,alt:"다음"}),t("span",null,"다음")],-1)),t("div",ge,h(v(c).title),1)]),_:1},8,["to","title"])):C("",!0)])],2)}}}),$e=w(Se,[["__scopeId","data-v-036566f9"]]),ke={class:"section-references"},be={class:"items"},we={class:"item"},Ce=b({__name:"SectionReferences",props:{references:{}},setup(r){const a=r;return(i,n)=>(d(),_("div",ke,[n[0]||(n[0]=t("div",{class:"subject"},"참고 자료",-1)),t("div",be,[(d(!0),_(L,null,W(a.references,c=>(d(),_("div",we,[t("span",null,h(c),1)]))),256))])]))}}),ye=w(Ce,[["__scopeId","data-v-032f39d2"]]),Te={class:"section-sources"},Ne={class:"items"},Me={class:"item"},Ee=b({__name:"SectionSources",props:{sources:{}},setup(r){const a=r;return(i,n)=>(d(),_("div",Te,[n[0]||(n[0]=t("div",{class:"subject"},"내용 출처",-1)),t("div",Ne,[(d(!0),_(L,null,W(a.sources,(c,e)=>(d(),_("div",Me,[t("span",null,"["+h(e+1)+"] "+h(c),1)]))),256))])]))}}),Re=w(Ee,[["__scopeId","data-v-dadd46de"]]),xe={class:"section"},Ae={class:"container"},De={class:"wrapper"},Le={class:"main"},He={key:0,class:"sources"},Ue={key:1,class:"references"},Be={class:"navigation"},Oe=b({__name:"Section",setup(r){const a=J(),i=G(),n=V(),c=Y(),e=T(),o=T(),s=T(),p=$(()=>{var l;return(l=c.params.courseId)==null?void 0:l.toString()}),I=$(()=>{var l;return(l=c.params.chapterId)==null?void 0:l.toString()}),g=$(()=>{var l;return(l=c.params.sectionId)==null?void 0:l.toString()}),f=$(()=>E.find(l=>l.id===p.value)),u=$(()=>n.getSection(p.value,I.value,g.value)),m=l=>{var S;a.windowSize.width<=1399||s.value&&s.value.scrollTo({top:l-s.value.offsetTop-(((S=o.value)==null?void 0:S.offsetHeight)||0),behavior:"smooth"})};return(l,S)=>{var N,y,U,B;const H=P("router-link");return d(),_("div",xe,[t("div",Ae,[t("div",De,[t("div",Le,[t("div",{class:"core",ref_key:"coreRef",ref:e},[(d(),A(fe,{courseId:p.value,chapterId:I.value,sectionId:g.value,key:g.value},null,8,["courseId","chapterId","sectionId"]))],512),(y=(N=u.value)==null?void 0:N.sources)!=null&&y.length?(d(),_("div",He,[k(Re,{sources:u.value.sources},null,8,["sources"])])):C("",!0),(B=(U=u.value)==null?void 0:U.references)!=null&&B.length?(d(),_("div",Ue,[k(ye,{references:u.value.references},null,8,["references"])])):C("",!0),t("div",Be,[k($e,{courseId:p.value,chapterId:I.value,sectionId:g.value},null,8,["courseId","chapterId","sectionId"])])]),t("div",{class:"chapters",ref_key:"chaptersRef",ref:s,style:K({height:v(i).mainHeight})},[t("div",{class:"top",ref_key:"chaptersTopRef",ref:o},[k(H,{to:`/courses/${p.value}`,class:"btn"},{default:D(()=>{var O;return[S[0]||(S[0]=t("img",{src:X},null,-1)),t("span",null,h((O=f.value)==null?void 0:O.title),1)]}),_:1},8,["to"])],512),k(Q,{courseId:p.value,chapterId:I.value,sectionId:g.value,theme:"light",onScrollable:m},null,8,["courseId","chapterId","sectionId"])],4)])])])}}}),ze=w(Oe,[["__scopeId","data-v-c5fc5fc3"]]);export{ze as default};
