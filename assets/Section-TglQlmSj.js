import{f as $,m as T,n as I,c as f,p as N,b as t,o as u,_ as k,q as z,k as j,s as q,v as F,j as C,t as g,u as v,F as L,d as S,x,h as E,w as D,r as W,g as P,y as J,z as G,i as Y,A as K}from"./index-Bl1Z_kCC.js";import{c as M}from"./courses-D7DxJWx4.js";import{C as Q}from"./Chapters-DeEmJmdV.js";const X="/assets/images/common.home.white.svg",A={renew(c){return JSON.parse(JSON.stringify(c))},isNumeric(c){return!isNaN(Number(c))},generateDomId(){return window.crypto.randomUUID()},getHumanReadableDate(c){const a=new Date(c.replace(" ","T")),n=new Date().getTime()-a.getTime(),r=Math.floor(n/1e3),e=Math.floor(r/60),o=Math.floor(e/60),s=Math.floor(o/24),p=Math.floor(s/30),l=Math.floor(s/365);return isNaN(a.getTime())?"(N/A)":r<60?"방금 전":e<60?`${e}분 전`:o<24?`${o}시간 전`:s<30?`${s}일 전`:p<12?`${p}개월 전`:`${l}년 전`}},Z=["innerHTML"],ee=$({__name:"SectionCoreContent",props:{content:{},skeleton:{type:Boolean}},setup(c){const a=c,i=T(),n=I(()=>{const r=/(\bhttps?:\/\/[^\s<>"')\]]+)/g;return a.content.replace(r,(e,o)=>a.content.includes(`<a href="${o}"`)||a.content.includes(`<a href='${o}'`)?e:`<a href="${o}" target="_blank" rel="noopener noreferrer">${o}</a>`)});return(r,e)=>(u(),f("div",{class:N(["section-core-content",{skeleton:a.skeleton}]),ref_key:"rootRef",ref:i},[t("div",{innerHTML:n.value},null,8,Z)],2))}}),te=k(ee,[["__scopeId","data-v-73f7b6ca"]]),oe=$({__name:"SectionCoreVideo",props:{url:{},skeleton:{type:Boolean}},setup(c){const a=c;return(i,n)=>(u(),f("div",{class:N(["section-core-video",{skeleton:a.skeleton}])},n[0]||(n[0]=[t("div",{class:"wrapper"},[t("div",{class:"inner"})],-1)]),2))}}),se=k(oe,[["__scopeId","data-v-6d707307"]]);function V(){const c=i=>M.find(n=>n.id===i);return{getCourse:c,getSection:(i,n,r)=>{const e=c(i);if(e){const o=e.chapters.find(s=>s.id===n);if(o)return o.sections.find(s=>s.id===r)}return null}}}const ne={class:"header"},re={class:"top"},ce={class:"chapter"},ae={class:"title"},ie={class:"date"},le=["title"],de=["title"],ue={key:0,class:"video"},pe={class:"content"},_e=$({__name:"SectionCore",props:{courseId:{},chapterId:{},sectionId:{}},setup(c){const a=V(),i=c,n=T(),r=window.bootstrap,e=z({loaded:!1,title:"WAIT A MOMENT",videoUrl:null,content:"<p>PLEASE WAIT A MOMENT</p>",created:"WAIT A MOMENT",updated:"WAIT A MOMENT",courseTitle:"WAIT",chapterTitle:"WAIT"}),o=I(()=>a.getSection(i.courseId,i.chapterId,i.sectionId)),s=()=>{document.querySelectorAll('[data-bs-toggle="popover"]').forEach(l=>{const d=r.Popover.getInstance(l);d&&d.dispose()})},p=l=>{var m;s();const d=l.target;if(d.tagName.toLowerCase()==="a"){const h=d;if(h.getAttribute("data-bs-toggle")){const w=h.textContent;if(w){const _=w.replace("[","").replace("]","");if(A.isNumeric(_)){const R=window.Number.parseInt(_)-1,y=(m=o.value)==null?void 0:m.sources[R];y&&(h.setAttribute("data-bs-content",y),new r.Popover(h).show())}}}}};return j(async()=>{M.forEach(l=>{if(l.id===i.courseId){l.chapters.forEach(d=>{if(d.id===i.chapterId){d.sections.forEach(async m=>{if(m.id===i.sectionId){const{html:h}=await m.read();e.loaded=!0,e.title=m.title,e.videoUrl=m.videoUrl,e.content=h,e.created=m.created,e.updated=m.updated,e.courseTitle=l.title,e.chapterTitle=d.title;return}});return}});return}})}),q(()=>{var l;(l=n.value)==null||l.addEventListener("click",p)}),F(()=>{var l;(l=n.value)==null||l.removeEventListener("click",p)}),(l,d)=>(u(),f("div",{class:N(["section-core",{skeleton:!e.loaded}]),ref_key:"rootRef",ref:n},[t("div",ne,[t("div",re,[t("span",ce,g(e.chapterTitle),1)]),t("div",ae,[t("span",null,g(e.title),1)]),t("div",ie,[t("span",{title:e.created}," 생성: "+g(v(A).getHumanReadableDate(e.created)),9,le),e.created!==e.updated?(u(),f(L,{key:0},[d[0]||(d[0]=t("span",{class:"bar"},null,-1)),t("span",{title:e.updated}," 수정: "+g(v(A).getHumanReadableDate(e.updated)),9,de)],64)):C("",!0)])]),e.videoUrl!==null?(u(),f("div",ue,[S(se,{url:e.videoUrl,skeleton:!e.loaded},null,8,["url","skeleton"])])):C("",!0),t("div",pe,[S(te,{content:e.content,skeleton:!e.loaded},null,8,["content","skeleton"])])],2))}}),fe=k(_e,[["__scopeId","data-v-27336746"]]),ve="/assets/images/common.angle.left.svg",me="/assets/images/common.angle.right.svg",he={class:"wrapper"},ge={class:"title"},Ie={class:"title"},Se=$({__name:"SectionNavigation",props:{courseId:{},chapterId:{},sectionId:{}},setup(c){const a=c,i=x(()=>{const e=[];return M.forEach(o=>{o.chapters.forEach(s=>{s.sections.forEach(p=>{e.push({id:p.id,title:p.title,url:`/courses/${o.id}/${s.id}/${p.id}`})})})}),e}),n=x(()=>{let e=null;const o=i.value;for(let s=0;s<o.length;s++)o[s].id===a.sectionId&&(e=o[s-1]);return e}),r=x(()=>{let e=null;const o=i.value;for(let s=0;s<o.length;s++)o[s].id===a.sectionId&&(e=o[s+1]);return e});return(e,o)=>{const s=W("router-link");return u(),f("div",{class:N(["section-navigation",{both:v(n)&&v(r)}])},[t("div",he,[v(n)?(u(),E(s,{key:0,to:v(n).url||"",class:"item prev",title:v(n).title},{default:D(()=>[o[0]||(o[0]=t("div",{class:"label"},[t("img",{src:ve,alt:"이전"}),t("span",null,"이전")],-1)),t("div",ge,g(v(n).title),1)]),_:1},8,["to","title"])):C("",!0),v(r)?(u(),E(s,{key:1,to:v(r).url,class:"item next",title:v(r).title},{default:D(()=>[o[1]||(o[1]=t("div",{class:"label"},[t("img",{src:me,alt:"다음"}),t("span",null,"다음")],-1)),t("div",Ie,g(v(r).title),1)]),_:1},8,["to","title"])):C("",!0)])],2)}}}),$e=k(Se,[["__scopeId","data-v-036566f9"]]),ke={class:"section-references"},be={class:"items"},Ce={class:"item"},ye=$({__name:"SectionReferences",props:{references:{}},setup(c){const a=c;return(i,n)=>(u(),f("div",ke,[n[0]||(n[0]=t("div",{class:"subject"},"참고 자료",-1)),t("div",be,[(u(!0),f(L,null,P(a.references,r=>(u(),f("div",Ce,[t("span",null,g(r),1)]))),256))])]))}}),Te=k(ye,[["__scopeId","data-v-032f39d2"]]),we={class:"section-sources"},Ne={class:"items"},Me={class:"item"},Re=$({__name:"SectionSources",props:{sources:{}},setup(c){const a=c;return(i,n)=>(u(),f("div",we,[n[0]||(n[0]=t("div",{class:"subject"},"내용 출처",-1)),t("div",Ne,[(u(!0),f(L,null,P(a.sources,(r,e)=>(u(),f("div",Me,[t("span",null,"["+g(e+1)+"] "+g(r),1)]))),256))])]))}}),xe=k(Re,[["__scopeId","data-v-dadd46de"]]),Ae={class:"section"},Ee={class:"container"},De={class:"wrapper"},Le={class:"main"},He={key:0,class:"sources"},Ue={key:1,class:"references"},Be={class:"navigation"},Oe=$({__name:"Section",setup(c){const a=J(),i=G(),n=V(),r=Y(),e=T(),o=T(),s=T(),p=I(()=>{var _;return(_=r.params.courseId)==null?void 0:_.toString()}),l=I(()=>{var _;return(_=r.params.chapterId)==null?void 0:_.toString()}),d=I(()=>{var _;return(_=r.params.sectionId)==null?void 0:_.toString()}),m=I(()=>M.find(_=>_.id===p.value)),h=I(()=>n.getSection(p.value,l.value,d.value)),w=_=>{var b;a.windowSize.width<=1399||s.value&&s.value.scrollTo({top:_-s.value.offsetTop-(((b=o.value)==null?void 0:b.offsetHeight)||0),behavior:"smooth"})};return(_,b)=>{var y,H,U,B;const R=W("router-link");return u(),f("div",Ae,[t("div",Ee,[t("div",De,[t("div",Le,[t("div",{class:"core",ref_key:"coreRef",ref:e},[(u(),E(fe,{courseId:p.value,chapterId:l.value,sectionId:d.value,key:d.value},null,8,["courseId","chapterId","sectionId"]))],512),(H=(y=h.value)==null?void 0:y.sources)!=null&&H.length?(u(),f("div",He,[S(xe,{sources:h.value.sources},null,8,["sources"])])):C("",!0),(B=(U=h.value)==null?void 0:U.references)!=null&&B.length?(u(),f("div",Ue,[S(Te,{references:h.value.references},null,8,["references"])])):C("",!0),t("div",Be,[S($e,{courseId:p.value,chapterId:l.value,sectionId:d.value},null,8,["courseId","chapterId","sectionId"])])]),t("div",{class:"chapters",ref_key:"chaptersRef",ref:s,style:K({height:v(i).mainHeight})},[t("div",{class:"top",ref_key:"chaptersTopRef",ref:o},[S(R,{to:`/courses/${p.value}`,class:"btn"},{default:D(()=>{var O;return[b[0]||(b[0]=t("img",{src:X},null,-1)),t("span",null,g((O=m.value)==null?void 0:O.title),1)]}),_:1},8,["to"])],512),S(Q,{courseId:p.value,chapterId:l.value,sectionId:d.value,theme:"light",onScrollable:w},null,8,["courseId","chapterId","sectionId"])],4)])])])}}}),ze=k(Oe,[["__scopeId","data-v-c5fc5fc3"]]);export{ze as default};
