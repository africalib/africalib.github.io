import{f as y,p as D,l as x,q as H,c as h,s as N,b as e,t as p,k as w,u as r,o as _,_ as C,v as S,h as $,w as T,r as A,x as O,i as R,y as W,z as m,j as B,d as M,n as L}from"./index-Cx_kuA8m.js";import{c as b}from"./courses-CBDlApBM.js";import{u as z,C as Y}from"./Chapters-BjQhO7hM.js";const V="/assets/images/common.home.white.svg",k={renew(u){return JSON.parse(JSON.stringify(u))},generateDomId(){return window.crypto.randomUUID()},getHumanReadableDate(u){const c=new Date(u.replace(" ","T")),i=new Date().getTime()-c.getTime(),a=Math.floor(i/1e3),n=Math.floor(a/60),t=Math.floor(n/60),s=Math.floor(t/24),d=Math.floor(s/30),v=Math.floor(s/365);return isNaN(c.getTime())?"(N/A)":a<60?"방금 전":n<60?`${n}분 전`:t<24?`${t}시간 전`:s<30?`${s}일 전`:d<12?`${d}개월 전`:`${v}년 전`}},J={class:"header"},P={class:"top"},U={class:"chapter"},j={class:"title"},q={class:"date"},F=["title"],G=["title"],K={class:"content"},Q=["innerHTML"],X=y({__name:"SectionCore",props:{courseId:{},chapterId:{},sectionId:{},onMounted:{type:Function}},setup(u){const c=u,o=D({loaded:!1,title:"WAIT",content:"<p>PLEASE WAIT A MOMENT</p>",created:"WAIT A MOMENT",updated:"WAIT A MOMENT",courseTitle:"WAIT",chapterTitle:"WAIT"});return x(async()=>{b.forEach(i=>{if(i.id===c.courseId){i.chapters.forEach(a=>{if(a.id===c.chapterId){a.sections.forEach(async n=>{if(n.id===c.sectionId){const{html:t}=await n.read();o.loaded=!0,o.title=n.title,o.content=t,o.created=n.created,o.updated=n.updated,o.courseTitle=i.title,o.chapterTitle=a.title;return}});return}});return}})}),H(()=>{c.onMounted&&c.onMounted()}),(i,a)=>(_(),h("div",{class:N(["section-core",{skeleton:!o.loaded}])},[e("div",J,[e("div",P,[e("span",U,p(o.chapterTitle),1)]),e("div",j,[e("span",null,p(o.title),1)]),e("div",q,[e("span",{title:o.created}," 생성: "+p(r(k).getHumanReadableDate(o.created)),9,F),o.created!==o.updated?(_(),h("span",{key:0,title:o.updated}," 수정: "+p(r(k).getHumanReadableDate(o.updated)),9,G)):w("",!0)])]),e("div",K,[e("div",{innerHTML:o.content},null,8,Q)])],2))}}),Z=C(X,[["__scopeId","data-v-6655352e"]]),tt="/assets/images/common.angle.left.svg",et="/assets/images/common.angle.right.svg",ot={class:"wrapper"},st={class:"title"},nt={class:"title"},at=y({__name:"SectionNavigation",props:{courseId:{},chapterId:{},sectionId:{}},setup(u){const c=u,o=S(()=>{const n=[];return b.forEach(t=>{t.chapters.forEach(s=>{s.sections.forEach(d=>{n.push({id:d.id,title:d.title,url:`/courses/${t.id}/${s.id}/${d.id}`})})})}),n}),i=S(()=>{let n=null;const t=o.value;for(let s=0;s<t.length;s++)t[s].id===c.sectionId&&(n=t[s-1]);return n}),a=S(()=>{let n=null;const t=o.value;for(let s=0;s<t.length;s++)t[s].id===c.sectionId&&(n=t[s+1]);return n});return(n,t)=>{const s=A("router-link");return _(),h("div",{class:N(["section-navigation",{both:r(i)&&r(a)}])},[e("div",ot,[r(i)?(_(),$(s,{key:0,to:r(i).url||"",class:"item prev",title:r(i).title},{default:T(()=>[t[0]||(t[0]=e("div",{class:"label"},[e("img",{src:tt,alt:"이전"}),e("span",null,"이전")],-1)),e("div",st,p(r(i).title),1)]),_:1},8,["to","title"])):w("",!0),r(a)?(_(),$(s,{key:1,to:r(a).url,class:"item next",title:r(a).title},{default:T(()=>[t[1]||(t[1]=e("div",{class:"label"},[e("img",{src:et,alt:"다음"}),e("span",null,"다음")],-1)),e("div",nt,p(r(a).title),1)]),_:1},8,["to","title"])):w("",!0)])],2)}}}),ct=C(at,[["__scopeId","data-v-36f021d8"]]),it={class:"container"},rt={class:"wrapper"},lt={class:"main"},dt={class:"navigation"},ut={class:"chapters"},pt={class:"top"},_t=y({__name:"Section",setup(u){const c=O(),o=z(),i=R(),a=B(),n=W(),t=m(()=>{var l;return(l=a.params.courseId)==null?void 0:l.toString()}),s=m(()=>{var l;return(l=a.params.chapterId)==null?void 0:l.toString()}),d=m(()=>{var l;return(l=a.params.sectionId)==null?void 0:l.toString()}),v=m(()=>b.find(l=>l.id===t.value)),E=()=>{if(n.value){if(o.scrollAction==="none")return;if(c.isMobile&&(window.scrollY||window.pageYOffset)<c.windowSize.height/10)return}else return;const g=n.value.getBoundingClientRect().top+window.pageYOffset+-12,f=o.scrollAction==="smooth"?"smooth":void 0;window.scrollTo({top:g,behavior:f})};return(l,I)=>{const g=A("router-link");return _(),h("div",{class:"section",style:L({height:r(i).mainHeight})},[e("div",it,[e("div",rt,[e("div",lt,[e("div",{class:"core",ref_key:"coreRef",ref:n},[(_(),$(Z,{courseId:t.value,chapterId:s.value,sectionId:d.value,key:d.value,onMounted:E},null,8,["courseId","chapterId","sectionId"]))],512),e("div",dt,[M(ct,{courseId:t.value,chapterId:s.value,sectionId:d.value},null,8,["courseId","chapterId","sectionId"])])]),e("div",ut,[e("div",pt,[M(g,{to:`/courses/${t.value}`,class:"btn",title:"클릭 시 강의 메인으로 이동"},{default:T(()=>{var f;return[I[0]||(I[0]=e("img",{src:V},null,-1)),e("span",null,p((f=v.value)==null?void 0:f.title),1)]}),_:1},8,["to"])]),M(Y,{courseId:t.value,chapterId:s.value,sectionId:d.value},null,8,["courseId","chapterId","sectionId"])])])])],4)}}}),It=C(_t,[["__scopeId","data-v-5dba7d95"]]);export{It as default};
