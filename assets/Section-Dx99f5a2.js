import{f,p as v,c as p,q as g,b as s,o as l,_ as m,s as y,l as N,k as h,t as _,u as i,F as w,d as I,v as $,h as S,w as k,r as E,i as b,x,j as A,n as D}from"./index-D-1-ZD-T.js";import{c as C}from"./courses-wuY_CsKZ.js";import{C as H}from"./Chapters-DXP7TPVe.js";const T={renew(d){return JSON.parse(JSON.stringify(d))},generateDomId(){return window.crypto.randomUUID()},getHumanReadableDate(d){const r=new Date(d.replace(" ","T")),c=new Date().getTime()-r.getTime(),a=Math.floor(c/1e3),o=Math.floor(a/60),n=Math.floor(o/60),t=Math.floor(n/24),u=Math.floor(t/30),M=Math.floor(t/365);return isNaN(r.getTime())?"(N/A)":a<60?"방금 전":o<60?`${o}분 전`:n<24?`${n}시간 전`:t<30?`${t}일 전`:u<12?`${u}개월 전`:`${M}년 전`}},R=["innerHTML"],U=f({__name:"SectionCoreContent",props:{content:{},skeleton:{type:Boolean}},setup(d){const r=d,e=v(()=>{const c=/(\bhttps?:\/\/[^\s<>"']+)/g;return r.content.replace(c,(a,o)=>r.content.includes(`<a href="${o}"`)||r.content.includes(`<a href='${o}'`)?a:`<a href="${o}" target="_blank" rel="noopener noreferrer">${o}</a>`)});return(c,a)=>(l(),p("div",{class:g(["section-core-content",{skeleton:r.skeleton}])},[s("div",{innerHTML:e.value},null,8,R)],2))}}),B=m(U,[["__scopeId","data-v-c0ea1b34"]]),O=f({__name:"SectionCoreVideo",props:{url:{},skeleton:{type:Boolean}},setup(d){const r=d;return(e,c)=>(l(),p("div",{class:g(["section-core-video",{skeleton:r.skeleton}])},c[0]||(c[0]=[s("div",{class:"wrapper"},[s("div",{class:"inner"})],-1)]),2))}}),W=m(O,[["__scopeId","data-v-6d707307"]]),L={class:"header"},V={class:"top"},z={class:"chapter"},F={class:"title"},J={class:"date"},P=["title"],j=["title"],q={key:0,class:"video"},Y={class:"content"},G=f({__name:"SectionCore",props:{courseId:{},chapterId:{},sectionId:{}},setup(d){const r=d,e=y({loaded:!1,title:"WAIT A MOMENT",videoUrl:null,content:"<p>PLEASE WAIT A MOMENT</p>",created:"WAIT A MOMENT",updated:"WAIT A MOMENT",courseTitle:"WAIT",chapterTitle:"WAIT"});return N(async()=>{C.forEach(c=>{if(c.id===r.courseId){c.chapters.forEach(a=>{if(a.id===r.chapterId){a.sections.forEach(async o=>{if(o.id===r.sectionId){const{html:n}=await o.read();e.loaded=!0,e.title=o.title,e.videoUrl=o.videoUrl,e.content=n,e.created=o.created,e.updated=o.updated,e.courseTitle=c.title,e.chapterTitle=a.title;return}});return}});return}})}),(c,a)=>(l(),p("div",{class:g(["section-core",{skeleton:!e.loaded}])},[s("div",L,[s("div",V,[s("span",z,_(e.chapterTitle),1)]),s("div",F,[s("span",null,_(e.title),1)]),s("div",J,[s("span",{title:e.created}," 생성: "+_(i(T).getHumanReadableDate(e.created)),9,P),e.created!==e.updated?(l(),p(w,{key:0},[a[0]||(a[0]=s("span",{class:"bar"},null,-1)),s("span",{title:e.updated}," 수정: "+_(i(T).getHumanReadableDate(e.updated)),9,j)],64)):h("",!0)])]),e.videoUrl!==null?(l(),p("div",q,[I(W,{url:e.videoUrl,skeleton:!e.loaded},null,8,["url","skeleton"])])):h("",!0),s("div",Y,[I(B,{content:e.content,skeleton:!e.loaded},null,8,["content","skeleton"])])],2))}}),K=m(G,[["__scopeId","data-v-0107878a"]]),Q="/assets/images/common.angle.left.svg",X="/assets/images/common.angle.right.svg",Z={class:"wrapper"},ee={class:"title"},te={class:"title"},oe=f({__name:"SectionNavigation",props:{courseId:{},chapterId:{},sectionId:{}},setup(d){const r=d,e=$(()=>{const o=[];return C.forEach(n=>{n.chapters.forEach(t=>{t.sections.forEach(u=>{o.push({id:u.id,title:u.title,url:`/courses/${n.id}/${t.id}/${u.id}`})})})}),o}),c=$(()=>{let o=null;const n=e.value;for(let t=0;t<n.length;t++)n[t].id===r.sectionId&&(o=n[t-1]);return o}),a=$(()=>{let o=null;const n=e.value;for(let t=0;t<n.length;t++)n[t].id===r.sectionId&&(o=n[t+1]);return o});return(o,n)=>{const t=E("router-link");return l(),p("div",{class:g(["section-navigation",{both:i(c)&&i(a)}])},[s("div",Z,[i(c)?(l(),S(t,{key:0,to:i(c).url||"",class:"item prev",title:i(c).title},{default:k(()=>[n[0]||(n[0]=s("div",{class:"label"},[s("img",{src:Q,alt:"이전"}),s("span",null,"이전")],-1)),s("div",ee,_(i(c).title),1)]),_:1},8,["to","title"])):h("",!0),i(a)?(l(),S(t,{key:1,to:i(a).url,class:"item next",title:i(a).title},{default:k(()=>[n[1]||(n[1]=s("div",{class:"label"},[s("img",{src:X,alt:"다음"}),s("span",null,"다음")],-1)),s("div",te,_(i(a).title),1)]),_:1},8,["to","title"])):h("",!0)])],2)}}}),se=m(oe,[["__scopeId","data-v-036566f9"]]),ne={class:"section"},ae={class:"container"},ce={class:"wrapper"},re={class:"main"},ie={class:"navigation"},de=f({__name:"Section",setup(d){const r=b(),e=A(),c=x(),a=v(()=>{var t;return(t=e.params.courseId)==null?void 0:t.toString()}),o=v(()=>{var t;return(t=e.params.chapterId)==null?void 0:t.toString()}),n=v(()=>{var t;return(t=e.params.sectionId)==null?void 0:t.toString()});return(t,u)=>(l(),p("div",ne,[s("div",ae,[s("div",ce,[s("div",re,[s("div",{class:"core",ref_key:"coreRef",ref:c},[(l(),S(K,{courseId:a.value,chapterId:o.value,sectionId:n.value,key:n.value},null,8,["courseId","chapterId","sectionId"]))],512),s("div",ie,[I(se,{courseId:a.value,chapterId:o.value,sectionId:n.value},null,8,["courseId","chapterId","sectionId"])])]),s("div",{class:"chapters",style:D({height:i(r).mainHeight})},[I(H,{courseId:a.value,chapterId:o.value,sectionId:n.value},null,8,["courseId","chapterId","sectionId"])],4)])])]))}}),_e=m(de,[["__scopeId","data-v-70d7641d"]]);export{_e as default};
