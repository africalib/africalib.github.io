import{f,p as m,c as p,q as g,b as n,o as l,_ as h,s as y,l as N,k as v,t as _,u as i,d as I,v as $,h as S,w as k,r as b,i as w,x as E,j as x,n as A}from"./index-DaD_ATv7.js";import{c as C}from"./courses-BpOQGZTp.js";import{C as D}from"./Chapters-rOqDQsyM.js";const T={renew(d){return JSON.parse(JSON.stringify(d))},generateDomId(){return window.crypto.randomUUID()},getHumanReadableDate(d){const r=new Date(d.replace(" ","T")),a=new Date().getTime()-r.getTime(),c=Math.floor(a/1e3),o=Math.floor(c/60),s=Math.floor(o/60),t=Math.floor(s/24),u=Math.floor(t/30),M=Math.floor(t/365);return isNaN(r.getTime())?"(N/A)":c<60?"방금 전":o<60?`${o}분 전`:s<24?`${s}시간 전`:t<30?`${t}일 전`:u<12?`${u}개월 전`:`${M}년 전`}},H=["innerHTML"],R=f({__name:"SectionCoreContent",props:{content:{},skeleton:{type:Boolean}},setup(d){const r=d,e=m(()=>{const a=/(\bhttps?:\/\/[^\s<>"']+)/g;return r.content.replace(a,(c,o)=>r.content.includes(`<a href="${o}"`)||r.content.includes(`<a href='${o}'`)?c:`<a href="${o}" target="_blank" rel="noopener noreferrer">${o}</a>`)});return(a,c)=>(l(),p("div",{class:g(["section-core-content",{skeleton:r.skeleton}])},[n("div",{innerHTML:e.value},null,8,H)],2))}}),U=h(R,[["__scopeId","data-v-c0ea1b34"]]),B=f({__name:"SectionCoreVideo",props:{url:{},skeleton:{type:Boolean}},setup(d){const r=d;return(e,a)=>(l(),p("div",{class:g(["section-core-video",{skeleton:r.skeleton}])},a[0]||(a[0]=[n("div",{class:"wrapper"},[n("div",{class:"inner"})],-1)]),2))}}),O=h(B,[["__scopeId","data-v-6d707307"]]),W={class:"header"},L={class:"top"},V={class:"chapter"},z={class:"title"},J={class:"date"},P=["title"],j=["title"],q={key:0,class:"video"},Y={class:"content"},F=f({__name:"SectionCore",props:{courseId:{},chapterId:{},sectionId:{}},setup(d){const r=d,e=y({loaded:!1,title:"WAIT A MOMENT",videoUrl:null,content:"<p>PLEASE WAIT A MOMENT</p>",created:"WAIT A MOMENT",updated:"WAIT A MOMENT",courseTitle:"WAIT",chapterTitle:"WAIT"});return N(async()=>{C.forEach(a=>{if(a.id===r.courseId){a.chapters.forEach(c=>{if(c.id===r.chapterId){c.sections.forEach(async o=>{if(o.id===r.sectionId){const{html:s}=await o.read();e.loaded=!0,e.title=o.title,e.videoUrl=o.videoUrl,e.content=s,e.created=o.created,e.updated=o.updated,e.courseTitle=a.title,e.chapterTitle=c.title;return}});return}});return}})}),(a,c)=>(l(),p("div",{class:g(["section-core",{skeleton:!e.loaded}])},[n("div",W,[n("div",L,[n("span",V,_(e.chapterTitle),1)]),n("div",z,[n("span",null,_(e.title),1)]),n("div",J,[n("span",{title:e.created}," 생성: "+_(i(T).getHumanReadableDate(e.created)),9,P),e.created!==e.updated?(l(),p("span",{key:0,title:e.updated}," 수정: "+_(i(T).getHumanReadableDate(e.updated)),9,j)):v("",!0)])]),e.videoUrl!==null?(l(),p("div",q,[I(O,{url:e.videoUrl,skeleton:!e.loaded},null,8,["url","skeleton"])])):v("",!0),n("div",Y,[I(U,{content:e.content,skeleton:!e.loaded},null,8,["content","skeleton"])])],2))}}),G=h(F,[["__scopeId","data-v-125c23fb"]]),K="/assets/images/common.angle.left.svg",Q="/assets/images/common.angle.right.svg",X={class:"wrapper"},Z={class:"title"},ee={class:"title"},te=f({__name:"SectionNavigation",props:{courseId:{},chapterId:{},sectionId:{}},setup(d){const r=d,e=$(()=>{const o=[];return C.forEach(s=>{s.chapters.forEach(t=>{t.sections.forEach(u=>{o.push({id:u.id,title:u.title,url:`/courses/${s.id}/${t.id}/${u.id}`})})})}),o}),a=$(()=>{let o=null;const s=e.value;for(let t=0;t<s.length;t++)s[t].id===r.sectionId&&(o=s[t-1]);return o}),c=$(()=>{let o=null;const s=e.value;for(let t=0;t<s.length;t++)s[t].id===r.sectionId&&(o=s[t+1]);return o});return(o,s)=>{const t=b("router-link");return l(),p("div",{class:g(["section-navigation",{both:i(a)&&i(c)}])},[n("div",X,[i(a)?(l(),S(t,{key:0,to:i(a).url||"",class:"item prev",title:i(a).title},{default:k(()=>[s[0]||(s[0]=n("div",{class:"label"},[n("img",{src:K,alt:"이전"}),n("span",null,"이전")],-1)),n("div",Z,_(i(a).title),1)]),_:1},8,["to","title"])):v("",!0),i(c)?(l(),S(t,{key:1,to:i(c).url,class:"item next",title:i(c).title},{default:k(()=>[s[1]||(s[1]=n("div",{class:"label"},[n("img",{src:Q,alt:"다음"}),n("span",null,"다음")],-1)),n("div",ee,_(i(c).title),1)]),_:1},8,["to","title"])):v("",!0)])],2)}}}),oe=h(te,[["__scopeId","data-v-91954cb9"]]),se={class:"section"},ne={class:"container"},ae={class:"wrapper"},ce={class:"main"},re={class:"navigation"},ie=f({__name:"Section",setup(d){const r=w(),e=x(),a=E(),c=m(()=>{var t;return(t=e.params.courseId)==null?void 0:t.toString()}),o=m(()=>{var t;return(t=e.params.chapterId)==null?void 0:t.toString()}),s=m(()=>{var t;return(t=e.params.sectionId)==null?void 0:t.toString()});return(t,u)=>(l(),p("div",se,[n("div",ne,[n("div",ae,[n("div",ce,[n("div",{class:"core",ref_key:"coreRef",ref:a},[(l(),S(G,{courseId:c.value,chapterId:o.value,sectionId:s.value,key:s.value},null,8,["courseId","chapterId","sectionId"]))],512),n("div",re,[I(oe,{courseId:c.value,chapterId:o.value,sectionId:s.value},null,8,["courseId","chapterId","sectionId"])])]),n("div",{class:"chapters",style:A({height:i(r).mainHeight})},[I(D,{courseId:c.value,chapterId:o.value,sectionId:s.value},null,8,["courseId","chapterId","sectionId"])],4)])])]))}}),pe=h(ie,[["__scopeId","data-v-a445b8e6"]]);export{pe as default};
