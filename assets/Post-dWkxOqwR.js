import{d as b,i as N,q as w,n as D,l as W,c as i,v as E,g as y,m as u,e as m,u as o,j as L,x as O,o as a,_ as g,y as C,b as n,w as $,f as R,t as M,z as U,A as B,s as I,B as z}from"./index-OWtPmFFj.js";import{c as h}from"./commonLib-B4LiHA7t.js";import{D as V,a as q,b as H,c as F,_ as G,d as j,C as J,e as K}from"./common.angle.right-D5Lw6DRE.js";import{p as d,P as Q}from"./Posts-Cu8vGZar.js";const X={key:1,class:"video"},Y={key:2,class:"content"},Z=b({__name:"PostCore",props:{id:{},onContentLoaded:{type:Function}},setup(k){const p=N(),l=L(),r=k,e=w({loaded:!1,title:"WAIT A MOMENT",desc:"WAIT A MOMENT",videoUrl:null,content:"<p>PLEASE WAIT A MOMENT</p>",presentation:!1,created:"WAIT A MOMENT",updated:"WAIT A MOMENT",courseTitle:"WAIT",chapterTitle:"WAIT",sources:[],references:[]}),s=()=>{const t=new DOMParser().parseFromString(e.content,"text/html");Array.from(t.querySelectorAll("[data-bs-toggle='popover']")).forEach((f,v)=>{if(!e.sources[v]){console.warn("마크다운 파일에 입력한 출처와 차이가 있습니다.");return}f.setAttribute("title","자료 출처"),f.setAttribute("data-bs-content",h.linkify(e.sources[v])),f.innerText=`[${v+1}]`}),e.content=t.body.innerHTML};return D(async()=>{const t=d.find(c=>c.id===r.id);if(t){const{html:c}=await t.read();e.title=t.title,e.desc=t.desc,e.videoUrl=t.videoUrl,e.content=h.linkify(c),e.presentation=t.presentation,e.created=t.created,e.updated=t.updated,e.sources=t.sources,e.references=t.references,s(),O(()=>{e.loaded=!0,r.onContentLoaded()}),p.updateSiteTitle(e.title)}}),W(()=>{p.updateSiteTitle()}),(t,c)=>(a(),i("div",{class:E(["post-core",{skeleton:!e.loaded}])},[o(l).query.mode==="presentation"&&e.loaded?(a(),y(V,{key:0,title:e.title,desc:e.desc,content:e.content,sources:e.sources,references:e.references,created:e.created,updated:e.updated},null,8,["title","desc","content","sources","references","created","updated"])):u("",!0),m(q,{title:o(h).extractText(e.title),desc:e.desc,presentation:e.presentation,created:e.created,updated:e.updated,skeleton:!e.loaded},null,8,["title","desc","presentation","created","updated","skeleton"]),e.videoUrl?(a(),i("div",X,[m(H,{url:e.videoUrl,skeleton:!e.loaded},null,8,["url","skeleton"])])):u("",!0),e.content?(a(),i("div",Y,[m(F,{content:e.content,skeleton:!e.loaded},null,8,["content","skeleton"])])):u("",!0)],2))}}),ee=g(Z,[["__scopeId","data-v-2fba5676"]]),te={class:"wrapper"},se={class:"title"},oe={class:"title"},ne=b({__name:"PostNavigation",props:{id:{}},setup(k){const p=k,l=C(()=>{let e=null;for(let s=0;s<d.length;s++)if(d[s].id===p.id){e=d[s-1];break}return e}),r=C(()=>{let e=null;for(let s=0;s<d.length;s++)if(d[s].id===p.id){e=d[s+1];break}return e});return(e,s)=>{const t=R("router-link");return a(),i("div",{class:E(["post-navigation",{both:o(l)&&o(r)}])},[n("div",te,[o(l)?(a(),y(t,{key:0,to:`/posts/${o(l).id}`,class:"item prev",title:o(l).title},{default:$(()=>[s[0]||(s[0]=n("div",{class:"label"},[n("img",{src:G,alt:"이전"}),n("span",null,"이전")],-1)),n("div",se,M(o(h).extractText(o(l).title)),1)]),_:1},8,["to","title"])):u("",!0),o(r)?(a(),y(t,{key:1,to:`/posts/${o(r).id}`,class:"item next",title:o(r).title},{default:$(()=>[s[1]||(s[1]=n("div",{class:"label"},[n("img",{src:j,alt:"다음"}),n("span",null,"다음")],-1)),n("div",oe,M(o(h).extractText(o(r).title)),1)]),_:1},8,["to","title"])):u("",!0)])],2)}}}),ae=g(ne,[["__scopeId","data-v-289f49dc"]]),re={class:"post"},ce={class:"container"},le={class:"wrapper"},de={class:"main"},ie={class:"core"},ue={key:0,class:"sources"},pe={key:1,class:"references"},_e={class:"navigation"},me=b({__name:"Post",setup(k){const p=N(),l=U(),r=L(),e=B("postsRef"),s=w({contentLoaded:!1}),t=I(()=>{var _;return((_=r.params.id)==null?void 0:_.toString())??""}),c=I(()=>d.find(_=>_.id===t.value)),f=()=>{s.contentLoaded=!0},v=_=>{var T;p.windowSize.width<=1399||(T=e.value)==null||T.scrollTo({top:_-1,behavior:"smooth"})};return(_,T)=>{var A,S,x,P;return a(),i("div",re,[n("div",ce,[n("div",le,[n("div",de,[n("div",ie,[(a(),y(ee,{id:t.value,key:t.value,onContentLoaded:f},null,8,["id"]))]),(S=(A=c.value)==null?void 0:A.sources)!=null&&S.length?(a(),i("div",ue,[m(J,{sources:c.value.sources},null,8,["sources"])])):u("",!0),(P=(x=c.value)==null?void 0:x.references)!=null&&P.length?(a(),i("div",pe,[m(K,{references:c.value.references},null,8,["references"])])):u("",!0),n("div",_e,[m(ae,{id:t.value},null,8,["id"])])]),s.contentLoaded?(a(),i("div",{key:0,class:"posts",ref_key:"postsRef",ref:e,style:z({height:o(l).mainHeight})},[m(Q,{id:t.value,onScrollable:v},null,8,["id"])],4)):u("",!0)])])])}}}),ye=g(me,[["__scopeId","data-v-a924b723"]]);export{ye as default};
