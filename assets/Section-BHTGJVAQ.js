import{f as y,m as x,c as _,n as D,b as t,o as l,_ as w,F as E,g as q,t as k,j as C,u as g,p as Z,q as $,i as B,s as F,v as J,h as T,T as ee,d as I,w as b,x as z,y as V,l as te,r as H,z as se,k as oe,A as U,B as ne,C as re,D as ce}from"./index-CLoClIv6.js";import{c as O}from"./courses-Cu4-6Sn9.js";import{C as ie}from"./Chapters-BAXTX_zb.js";const ae="/assets/images/common.home.white.svg",le="/assets/images/component.section.core.main.svg",de="/assets/images/component.section.core.presentation.open.svg",R={renew(c){return JSON.parse(JSON.stringify(c))},linkify(c){const o=/(\bhttps?:\/\/[^\s<>"')\]]+)/g;return c.replace(o,(u,s)=>c.includes(`<a href="${s}"`)||c.includes(`<a href='${s}'`)?u:`<a href="${s}" target="_blank" rel="noopener noreferrer">${s}</a>`)},isNumeric(c){return!isNaN(Number(c))},generateDomId(){return window.crypto.randomUUID()},getHumanReadableDate(c){const o=new Date(c.replace(" ","T")),s=new Date().getTime()-o.getTime(),a=Math.floor(s/1e3),r=Math.floor(a/60),e=Math.floor(r/60),n=Math.floor(e/24),m=Math.floor(n/30),S=Math.floor(n/365);return isNaN(o.getTime())?"(N/A)":a<60?"방금 전":r<60?`${r}분 전`:e<24?`${e}시간 전`:n<30?`${n}일 전`:m<12?`${m}개월 전`:`${S}년 전`}},ue=["innerHTML"],pe=y({__name:"SectionCoreContent",props:{content:{},skeleton:{type:Boolean}},setup(c){const o=c,u=x();return(s,a)=>(l(),_("div",{class:D(["section-core-content",{skeleton:o.skeleton}]),ref_key:"rootRef",ref:u},[t("div",{innerHTML:o.content},null,8,ue)],2))}}),G=w(pe,[["__scopeId","data-v-0bcbbaa6"]]),fe=y({__name:"SectionCoreVideo",props:{url:{},skeleton:{type:Boolean}},setup(c){const o=c;return(u,s)=>(l(),_("div",{class:D(["section-core-video",{skeleton:o.skeleton}])},s[0]||(s[0]=[t("div",{class:"wrapper"},[t("div",{class:"inner"})],-1)]),2))}}),_e=w(fe,[["__scopeId","data-v-6d707307"]]);function K(){const c=s=>O.find(a=>a.id===s),o=(s,a)=>{const r=c(s);return r?r.chapters.find(e=>e.id===a):null};return{getCourse:c,getChapter:o,getSection:(s,a,r)=>{const e=o(s,a);return e?e.sections.find(n=>n.id===r):null}}}const me="/assets/images/component.section.core.presentation.position.svg",ve="/assets/images/component.section.core.presentation.close.svg",he="/assets/images/component.section.core.presentation.finish.svg",ge={class:"section-sources"},Ie={class:"items"},ke={class:"item"},Se=y({__name:"SectionSources",props:{sources:{}},setup(c){const o=c;return(u,s)=>(l(),_("div",ge,[s[0]||(s[0]=t("div",{class:"subject"},"내용 출처",-1)),t("div",Ie,[(l(!0),_(E,null,q(o.sources,(a,r)=>(l(),_("div",ke,[t("span",null,"["+k(r+1)+"] "+k(a),1)]))),256))])]))}}),X=w(Se,[["__scopeId","data-v-dadd46de"]]),$e={class:"section-references"},ye={class:"items"},we={class:"item"},be=y({__name:"SectionReferences",props:{references:{}},setup(c){const o=c;return(u,s)=>(l(),_("div",$e,[s[0]||(s[0]=t("div",{class:"subject"},"참고 자료",-1)),t("div",ye,[(l(!0),_(E,null,q(o.references,a=>(l(),_("div",we,[t("span",null,k(a),1)]))),256))])]))}}),Y=w(be,[["__scopeId","data-v-032f39d2"]]),Ce={class:"section-header"},Te={class:"wrapper"},Me={class:"title"},xe={class:"date"},Ne=["title"],Ae=["title"],Re={class:"side"},Ee=y({__name:"SectionHeader",props:{title:{},created:{},updated:{}},setup(c){const o=c;return(u,s)=>(l(),_("div",Ce,[t("div",Te,[t("div",Me,[t("span",null,k(o.title),1)]),t("div",xe,[t("span",{title:o.created}," 생성: "+k(g(R).getHumanReadableDate(o.created)),9,Ne),o.created!==o.updated?(l(),_(E,{key:0},[s[0]||(s[0]=t("span",{class:"bar"},null,-1)),t("span",{title:o.updated}," 수정: "+k(g(R).getHumanReadableDate(o.updated)),9,Ae)],64)):C("",!0)])]),t("div",Re,[Z(u.$slots,"default",{},void 0)])]))}}),Q=w(Ee,[["__scopeId","data-v-b404f3b0"]]),Le={class:"hide-sm"},De={class:"container"},He={class:"slide"},Pe={class:"slide end"},j="no-overflow",Ue=y({__name:"SectionPresentation",props:{title:{},created:{},updated:{},content:{},sources:{},references:{},skeleton:{type:Boolean}},setup(c){const o=c,u=B(),s=te(),a=x(null),r=$(()=>{const d=new DOMParser().parseFromString(o.content,"text/html");return Array.from(d.querySelectorAll(".slide")).map(f=>f.outerHTML)}),e=$(()=>{var d;return window.Number.parseInt(((d=u.query.idx)==null?void 0:d.toString())||"0")}),n=d=>{const f=R.renew(u.query);let v=e.value+d;v<0?v=0:v>r.value.length&&(v=r.value.length),e.value!==v&&(f.idx=v.toString(),s.push({query:f}))},m=d=>{d.key==="ArrowLeft"?n(-1):d.key==="ArrowRight"?n(1):d.key==="Escape"&&s.push({query:void 0})},S=d=>{const f=window.innerWidth;d.target.getAttribute("data-bs-toggle")!=="popover"&&(d.clientX<f/2?n(-1):n(1))};return F(()=>{document.addEventListener("keyup",m),document.body.classList.add(j)}),J(()=>{document.removeEventListener("keyup",m),document.body.classList.remove(j)}),(d,f)=>{const v=H("router-link");return l(),T(ee,{to:"body"},[t("div",{class:"presentation",ref_key:"rootRef",ref:a},[I(Q,{title:o.title,created:o.created,updated:o.updated},{default:b(()=>[t("div",Le,[f[0]||(f[0]=t("img",{src:me,alt:"슬라이드 번호"},null,-1)),t("div",null,k(e.value+1)+" / "+k(r.value.length+1),1)]),I(v,{to:"?"},{default:b(()=>f[1]||(f[1]=[t("img",{src:ve,alt:"발표 닫기"},null,-1),t("div",null,"발표 닫기",-1)])),_:1})]),_:1},8,["title","created","updated"]),t("div",{class:"slides",onClick:S},[t("div",De,[(l(!0),_(E,null,q(r.value,(h,i)=>z((l(),_("div",He,[I(G,{content:h,skeleton:d.skeleton},null,8,["content","skeleton"])],512)),[[V,e.value===i]])),256)),z(t("div",Pe,[f[2]||(f[2]=t("img",{src:he,loading:"lazy"},null,-1)),f[3]||(f[3]=t("div",{class:"text"},"이상 끝. 수고하셨습니다!",-1)),o.sources.length?(l(),T(X,{key:0,class:"w-100",sources:o.sources},null,8,["sources"])):C("",!0),o.references.length?(l(),T(Y,{key:1,class:"w-100",references:o.references},null,8,["references"])):C("",!0)],512),[[V,e.value===r.value.length]])])])],512)])}}}),qe=w(Ue,[["__scopeId","data-v-96c62673"]]),Be={key:0,class:"video"},Oe={class:"content"},We=y({__name:"SectionCore",props:{courseId:{},chapterId:{},sectionId:{}},setup(c){const o=B(),u=K(),s=c,a=x(),r=window.bootstrap,e=se({loaded:!1,title:"WAIT A MOMENT",videoUrl:null,content:"<p>PLEASE WAIT A MOMENT</p>",created:"WAIT A MOMENT",updated:"WAIT A MOMENT",courseTitle:"WAIT",chapterTitle:"WAIT",sources:[],references:[]}),n=$(()=>u.getSection(s.courseId,s.chapterId,s.sectionId)),m=$(()=>o.query.mode||"post"),S=()=>{document.querySelectorAll('[data-bs-toggle="popover"]').forEach(h=>{const i=r.Popover.getInstance(h);i&&i.dispose()})},d=h=>{var i;if(h.tagName.toLowerCase()==="a"){const p=h;if(p.getAttribute("data-bs-toggle")){const M=p.textContent;if(M){const N=M.replace("[","").replace("]","");if(R.isNumeric(N)){const L=window.Number.parseInt(N)-1,A=(i=n.value)==null?void 0:i.sources[L];A&&(p.setAttribute("data-bs-content",A),new r.Popover(p).show())}}}}},f=h=>{d(h.target)},v=h=>{S()};return oe(async()=>{const h=u.getCourse(s.courseId);if(h){const i=u.getChapter(s.courseId,s.chapterId);if(i){const p=n.value;if(p){const{html:M}=await p.read();e.loaded=!0,e.title=p.title,e.videoUrl=p.videoUrl,e.content=R.linkify(M),e.created=p.created,e.updated=p.updated,e.courseTitle=h.title,e.chapterTitle=i.title,e.sources=p.sources,e.references=p.references}}}}),F(()=>{document.addEventListener("click",f),document.addEventListener("mousedown",v)}),J(()=>{document.removeEventListener("click",f),document.removeEventListener("mousedown",v)}),(h,i)=>{const p=H("router-link");return l(),_("div",{class:D(["section-core",{skeleton:!e.loaded}]),ref_key:"rootRef",ref:a},[m.value==="presentation"?(l(),T(qe,{key:0,title:e.title,content:e.content,sources:e.sources,references:e.references,created:e.created,updated:e.updated,skeleton:!e.loaded},null,8,["title","content","sources","references","created","updated","skeleton"])):(l(),_(E,{key:1},[I(Q,{title:e.title,created:e.created,updated:e.updated},{default:b(()=>[I(p,{to:`/courses/${s.courseId}`,class:"d-none d-md-flex"},{default:b(()=>i[0]||(i[0]=[t("img",{src:le,alt:"강의 메인"},null,-1),t("div",null,"강의 메인",-1)])),_:1},8,["to"]),I(p,{to:"?mode=presentation"},{default:b(()=>i[1]||(i[1]=[t("img",{src:de,alt:"발표 열기"},null,-1),t("div",null,"발표 화면",-1)])),_:1})]),_:1},8,["title","created","updated"]),e.videoUrl!==null?(l(),_("div",Be,[I(_e,{url:e.videoUrl,skeleton:!e.loaded},null,8,["url","skeleton"])])):C("",!0),t("div",Oe,[I(G,{content:e.content,skeleton:!e.loaded},null,8,["content","skeleton"])])],64))],2)}}}),ze=w(We,[["__scopeId","data-v-be70274e"]]),Ve="/assets/images/common.angle.left.svg",je="/assets/images/common.angle.right.svg",Fe={class:"wrapper"},Je={class:"title"},Ge={class:"title"},Ke=y({__name:"SectionNavigation",props:{courseId:{},chapterId:{},sectionId:{}},setup(c){const o=c,u=U(()=>{const r=[];return O.forEach(e=>{e.chapters.forEach(n=>{n.sections.forEach(m=>{r.push({id:m.id,title:m.title,url:`/courses/${e.id}/${n.id}/${m.id}`})})})}),r}),s=U(()=>{let r=null;const e=u.value;for(let n=0;n<e.length;n++)e[n].id===o.sectionId&&(r=e[n-1]);return r}),a=U(()=>{let r=null;const e=u.value;for(let n=0;n<e.length;n++)e[n].id===o.sectionId&&(r=e[n+1]);return r});return(r,e)=>{const n=H("router-link");return l(),_("div",{class:D(["section-navigation",{both:g(s)&&g(a)}])},[t("div",Fe,[g(s)?(l(),T(n,{key:0,to:g(s).url||"",class:"item prev",title:g(s).title},{default:b(()=>[e[0]||(e[0]=t("div",{class:"label"},[t("img",{src:Ve,alt:"이전"}),t("span",null,"이전")],-1)),t("div",Je,k(g(s).title),1)]),_:1},8,["to","title"])):C("",!0),g(a)?(l(),T(n,{key:1,to:g(a).url,class:"item next",title:g(a).title},{default:b(()=>[e[1]||(e[1]=t("div",{class:"label"},[t("img",{src:je,alt:"다음"}),t("span",null,"다음")],-1)),t("div",Ge,k(g(a).title),1)]),_:1},8,["to","title"])):C("",!0)])],2)}}}),Xe=w(Ke,[["__scopeId","data-v-036566f9"]]),Ye={class:"section"},Qe={class:"container"},Ze={class:"wrapper"},et={class:"main"},tt={key:0,class:"sources"},st={key:1,class:"references"},ot={class:"navigation"},nt=y({__name:"Section",setup(c){const o=ne(),u=re(),s=K(),a=B(),r=x(),e=x(),n=x(),m=$(()=>{var i;return(i=a.params.courseId)==null?void 0:i.toString()}),S=$(()=>{var i;return(i=a.params.chapterId)==null?void 0:i.toString()}),d=$(()=>{var i;return(i=a.params.sectionId)==null?void 0:i.toString()}),f=$(()=>O.find(i=>i.id===m.value)),v=$(()=>s.getSection(m.value,S.value,d.value)),h=i=>{var p;o.windowSize.width<=1399||n.value&&n.value.scrollTo({top:i-n.value.offsetTop-(((p=e.value)==null?void 0:p.offsetHeight)||0),behavior:"smooth"})};return(i,p)=>{var N,P,L,A;const M=H("router-link");return l(),_("div",Ye,[t("div",Qe,[t("div",Ze,[t("div",et,[t("div",{class:"core",ref_key:"coreRef",ref:r},[(l(),T(ze,{courseId:m.value,chapterId:S.value,sectionId:d.value,key:d.value},null,8,["courseId","chapterId","sectionId"]))],512),(P=(N=v.value)==null?void 0:N.sources)!=null&&P.length?(l(),_("div",tt,[I(X,{sources:v.value.sources},null,8,["sources"])])):C("",!0),(A=(L=v.value)==null?void 0:L.references)!=null&&A.length?(l(),_("div",st,[I(Y,{references:v.value.references},null,8,["references"])])):C("",!0),t("div",ot,[I(Xe,{courseId:m.value,chapterId:S.value,sectionId:d.value},null,8,["courseId","chapterId","sectionId"])])]),t("div",{class:"chapters",ref_key:"chaptersRef",ref:n,style:ce({height:g(u).mainHeight})},[t("div",{class:"top",ref_key:"chaptersTopRef",ref:e},[I(M,{to:`/courses/${m.value}`,class:"btn"},{default:b(()=>{var W;return[p[0]||(p[0]=t("img",{src:ae},null,-1)),t("span",null,k((W=f.value)==null?void 0:W.title),1)]}),_:1},8,["to"])],512),I(ie,{courseId:m.value,chapterId:S.value,sectionId:d.value,theme:"light",onScrollable:h},null,8,["courseId","chapterId","sectionId"])],4)])])])}}}),at=w(nt,[["__scopeId","data-v-c5fc5fc3"]]);export{at as default};
