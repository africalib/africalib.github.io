import{f as S,p as k,l as E,q as D,c as _,s as y,b as s,t as f,k as I,u as r,o as p,_ as M,v as m,h as g,w,r as x,x as H,i as O,y as R,z as v,j as W,d as T,n as B}from"./index-lJCAaVnT.js";import{c as C}from"./courses-P3GeMqm5.js";import{u as L,C as z}from"./Chapters-ByHC5hCq.js";const $={renew(u){return JSON.parse(JSON.stringify(u))},generateDomId(){return window.crypto.randomUUID()},getHumanReadableDate(u){const c=new Date(u.replace(" ","T")),i=new Date().getTime()-c.getTime(),a=Math.floor(i/1e3),n=Math.floor(a/60),t=Math.floor(n/60),o=Math.floor(t/24),d=Math.floor(o/30),h=Math.floor(o/365);return isNaN(c.getTime())?"(N/A)":a<60?"방금 전":n<60?`${n}분 전`:t<24?`${t}시간 전`:o<30?`${o}일 전`:d<12?`${d}개월 전`:`${h}년 전`}},Y={class:"header"},V={class:"top"},J={class:"chapter"},P={class:"title"},U={class:"date"},j=["title"],q=["title"],F={class:"content"},G=["innerHTML"],K=S({__name:"SectionCore",props:{courseId:{},chapterId:{},sectionId:{},onMounted:{type:Function}},setup(u){const c=u,e=k({loaded:!1,title:"WAIT",content:"<p>PLEASE WAIT A MOMENT</p>",created:"WAIT A MOMENT",updated:"WAIT A MOMENT",courseTitle:"WAIT",chapterTitle:"WAIT"});return E(async()=>{C.forEach(i=>{if(i.id===c.courseId){i.chapters.forEach(a=>{if(a.id===c.chapterId){a.sections.forEach(async n=>{if(n.id===c.sectionId){const{html:t}=await n.read();e.loaded=!0,e.title=n.title,e.content=t,e.created=n.created,e.updated=n.updated,e.courseTitle=i.title,e.chapterTitle=a.title;return}});return}});return}})}),D(()=>{c.onMounted&&c.onMounted()}),(i,a)=>(p(),_("div",{class:y(["section-core",{skeleton:!e.loaded}])},[s("div",Y,[s("div",V,[s("span",J,f(e.chapterTitle),1)]),s("div",P,[s("span",null,f(e.title),1)]),s("div",U,[s("span",{title:e.created}," 생성: "+f(r($).getHumanReadableDate(e.created)),9,j),e.created!==e.updated?(p(),_("span",{key:0,title:e.updated}," 수정: "+f(r($).getHumanReadableDate(e.updated)),9,q)):I("",!0)])]),s("div",F,[s("div",{innerHTML:e.content},null,8,G)])],2))}}),Q=M(K,[["__scopeId","data-v-6655352e"]]),X="/assets/images/common.angle.left.svg",Z="/assets/images/common.angle.right.svg",tt={class:"wrapper"},et={class:"title"},ot={class:"title"},st=S({__name:"SectionNavigation",props:{courseId:{},chapterId:{},sectionId:{}},setup(u){const c=u,e=m(()=>{const n=[];return C.forEach(t=>{t.chapters.forEach(o=>{o.sections.forEach(d=>{n.push({id:d.id,title:d.title,url:`/courses/${t.id}/${o.id}/${d.id}`})})})}),n}),i=m(()=>{let n=null;const t=e.value;for(let o=0;o<t.length;o++)t[o].id===c.sectionId&&(n=t[o-1]);return n}),a=m(()=>{let n=null;const t=e.value;for(let o=0;o<t.length;o++)t[o].id===c.sectionId&&(n=t[o+1]);return n});return(n,t)=>{const o=x("router-link");return p(),_("div",{class:y(["section-navigation",{both:r(i)&&r(a)}])},[s("div",tt,[r(i)?(p(),g(o,{key:0,to:r(i).url||"",class:"item prev",title:r(i).title},{default:w(()=>[t[0]||(t[0]=s("div",{class:"label"},[s("img",{src:X,alt:"이전"}),s("span",null,"이전")],-1)),s("div",et,f(r(i).title),1)]),_:1},8,["to","title"])):I("",!0),r(a)?(p(),g(o,{key:1,to:r(a).url,class:"item next",title:r(a).title},{default:w(()=>[t[1]||(t[1]=s("div",{class:"label"},[s("img",{src:Z,alt:"다음"}),s("span",null,"다음")],-1)),s("div",ot,f(r(a).title),1)]),_:1},8,["to","title"])):I("",!0)])],2)}}}),nt=M(st,[["__scopeId","data-v-36f021d8"]]),at={class:"container"},ct={class:"wrapper"},it={class:"main"},rt={class:"navigation"},dt={class:"chapters"},lt=S({__name:"Section",setup(u){const c=H(),e=L(),i=O(),a=W(),n=R(),t=v(()=>{var l;return(l=a.params.courseId)==null?void 0:l.toString()}),o=v(()=>{var l;return(l=a.params.chapterId)==null?void 0:l.toString()}),d=v(()=>{var l;return(l=a.params.sectionId)==null?void 0:l.toString()}),h=()=>{if(n.value){if(e.scrollAction==="none")return;if(c.isMobile&&(window.scrollY||window.pageYOffset)<c.windowSize.height/10)return}else return;const A=n.value.getBoundingClientRect().top+window.pageYOffset+-12,b=e.scrollAction==="smooth"?"smooth":void 0;window.scrollTo({top:A,behavior:b})};return(l,N)=>(p(),_("div",{class:"section",style:B({height:r(i).mainHeight})},[s("div",at,[s("div",ct,[s("div",it,[s("div",{class:"core",ref_key:"coreRef",ref:n},[(p(),g(Q,{courseId:t.value,chapterId:o.value,sectionId:d.value,key:d.value,onMounted:h},null,8,["courseId","chapterId","sectionId"]))],512),s("div",rt,[T(nt,{courseId:t.value,chapterId:o.value,sectionId:d.value},null,8,["courseId","chapterId","sectionId"])])]),s("div",dt,[T(z,{courseId:t.value,chapterId:o.value,sectionId:d.value},null,8,["courseId","chapterId","sectionId"])])])])],4))}}),ht=M(lt,[["__scopeId","data-v-e864da73"]]);export{ht as default};
