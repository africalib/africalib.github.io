import{d as T,g as y,c as l,b as s,F as S,r as P,t as q,u as g,o as n,_ as E,n as O,i as U,h as R,j as X,k as I,f as $,l as M,T as oe,m as Z,p as N,q as re,s as Y,v as ee,w as le,x as ce,y as ie,z as j,A as ue,B as F,C as H,D as K,E as te}from"./index-C0NilABL.js";import{u as z,M as J}from"./material-aoLFIgyp.js";import{c as w}from"./commonLib-Co9BQnS0.js";import{C as de}from"./CryptoHelper-m6j8gmxG.js";import{_ as me,a as pe,b as _e}from"./common.arrow.left-TSorRx6s.js";import{r as ve}from"./routeLib-DhAZaWiT.js";import{A as he}from"./Above-yiEGaLJg.js";import"./Panel-CunIj-FC.js";const fe={class:"common-sources"},ge={class:"items"},ye=["innerHTML"],ke=T({__name:"MaterialSources",props:{sources:{}},setup(h){const t=h,c=y(()=>{const p=new Map;return t.sources.forEach((o,i)=>{p.has(o)||p.set(o,[]),p.get(o).push(i+1)}),Array.from(p.entries()).map(([o,i])=>({indexes:i,src:o}))});return(p,o)=>(n(),l("div",fe,[o[1]||(o[1]=s("div",{class:"subject"},"자료 출처",-1)),s("div",ge,[(n(!0),l(S,null,P(c.value,i=>(n(),l("div",{class:"item",key:i.src},[(n(!0),l(S,null,P(i.indexes,v=>(n(),l("span",null,"["+q(v)+"]",1))),256)),o[0]||(o[0]=s("span",null," ",-1)),s("span",{innerHTML:g(w).linkify(i.src)},null,8,ye)]))),128))])]))}}),se=E(ke,[["__scopeId","data-v-a34ac84b"]]),$e={class:"common-references"},be={class:"items"},xe={class:"item"},we=T({__name:"MaterialReferences",props:{references:{}},setup(h){const t=h;return(c,p)=>(n(),l("div",$e,[p[0]||(p[0]=s("div",{class:"subject"},"참고 자료",-1)),s("div",be,[(n(!0),l(S,null,P(t.references,o=>(n(),l("div",xe,[s("span",null,q(o),1)]))),256))])]))}}),ne=E(we,[["__scopeId","data-v-64c8b31c"]]),Me=["innerHTML"],Te=T({__name:"DocumentContent",props:{document:{},skeleton:{type:Boolean}},setup(h){const t=h;return(c,p)=>(n(),l("div",{class:O(["document-content",{skeleton:t.skeleton}])},[s("div",{innerHTML:t.document,ref:"contentRef"},null,8,Me)],2))}}),ae=E(Te,[["__scopeId","data-v-7a52ca4e"]]),Le="/assets/images/component.document.presentation.slide.first.svg",Se="/assets/images/component.material.presentation.finish.svg",B=T({__name:"DocumentPrompt",props:{content:{}},setup(h){const t=h;return U(()=>{console.info(t.content.replace(/\n{3,}/g,`

`))}),(c,p)=>null}}),Ee={class:"presentation"},Ae={class:"slides"},Ce={key:0,class:"slide start"},De={class:"container"},Ie={class:"slide-item"},qe=["innerHTML"],He={key:1,class:"slide finish"},Pe={class:"container"},Re={key:0,class:"slide"},Ne={class:"container"},Q="no-overflow",je=T({__name:"MaterialPresentation",props:{material:{},document:{}},setup(h){const t={touchStartX:0,touchStartY:0},c=h,p=R(),o=Z(),i=`이렇게 해서 ${w.extractText(c.material.title)}에 대해 알아봤습니다. 수고하셨습니다!`,v=y(()=>c.material.title.replace(/\*\*(.*?)\*\*/g,"<b>$1</b>")),a=y(()=>{const d=[c.material.desc];return r.value.length===0&&e.value.length===1&&d.push(e.value[0]),d.join("")}),r=y(()=>{const d=new DOMParser().parseFromString(c.document,"text/html");return Array.from(d.querySelectorAll(".slide-item")).map(m=>m.outerHTML)}),e=y(()=>{const d=[],m={},x=new DOMParser().parseFromString(c.document,"text/html");Array.from(x.querySelectorAll(".slide-text")).forEach(L=>{const D=L.getAttribute("data-slide-text-group");D&&(!m[D]&&(m[D]=[]),m[D].push(w.replaceAll(L.outerText,"  ","").trim()))});for(let L in m)d.push(m[L].join(`
`));return d}),u=y(()=>{var d;return window.Number.parseInt(((d=p.query.idx)==null?void 0:d.toString())||"0")}),f=y(()=>r.value.length+1),b=d=>{const m=w.renew(p.query);let x=u.value+d;x<0?x=0:x>f.value&&(x=f.value),u.value!==x&&(m.idx=x.toString(),o.push({query:m}))},_=(d,m)=>{switch(d){case"ArrowLeft":!m&&b(-1);break;case"ArrowRight":!m&&b(1);break;case"F9":case"Escape":!m&&o.push({query:void 0});break}},k=d=>{_(d.key,d.altKey)},A=d=>{const m=d.touches[0];t.touchStartX=m.clientX,t.touchStartY=m.clientY},C=d=>{const m=d.changedTouches[0],x=m.clientX,G=m.clientY,L=x-t.touchStartX,D=G-t.touchStartY;Math.abs(L)>Math.abs(D)&&Math.abs(L)>50&&(L>0?b(-1):b(1))},V=d=>{d.data.type==="keyup"&&_(d.data.key,d.data.altKey)};return U(()=>{document.addEventListener("keyup",k),document.addEventListener("touchstart",A),document.addEventListener("touchend",C),window.addEventListener("message",V),document.body.classList.add(Q)}),X(()=>{document.removeEventListener("keyup",k),document.removeEventListener("touchstart",A),document.removeEventListener("touchend",C),window.removeEventListener("message",V),document.body.classList.remove(Q)}),(d,m)=>(n(),I(oe,{to:"body"},[s("div",Ee,[s("div",Ae,[u.value===0?(n(),l("div",Ce,[s("div",De,[s("figure",Ie,[m[0]||(m[0]=s("img",{src:Le,alt:"코딩",loading:"lazy"},null,-1)),s("figcaption",null,[s("span",{innerHTML:v.value},null,8,qe),$(B,{content:a.value},null,8,["content"])])])])])):u.value===f.value?(n(),l("div",He,[s("div",Pe,[m[1]||(m[1]=s("figure",{class:"slide-item"},[s("img",{src:Se,alt:"하이파이브",class:"mh-400",loading:"lazy"}),s("figcaption",null,[s("b",null,"이상 끝. "),s("span",null,"수고하셨습니다!")])],-1)),c.material.sources.length?(n(),I(se,{key:0,class:"w-100 mb-3",sources:c.material.sources},null,8,["sources"])):M("",!0),c.material.references.length?(n(),I(ne,{key:1,class:"w-100",references:c.material.references},null,8,["references"])):M("",!0),$(B,{content:i})])])):(n(!0),l(S,{key:2},P(r.value.length,x=>(n(),l(S,null,[u.value===x?(n(),l("div",Re,[s("div",Ne,[$(ae,{document:r.value[x-1]},null,8,["document"]),$(B,{content:e.value[x-1]||""},null,8,["content"])])])):M("",!0)],64))),256))])])]))}}),Fe=E(je,[["__scopeId","data-v-29a055a6"]]);function Be(){const h=N(null),t=N(null),c=N(!1);return{data:h,error:t,loading:c,request:async({url:o,method:i="GET",body:v,contentType:a="application/json",...r})=>{c.value=!0,t.value=null;try{const e={"Content-Type":a,...r.headers||{}},u={method:i,headers:e,...r};v&&(u.body=a==="application/json"?JSON.stringify(v):v);const f=await fetch(o,u);if(!f.ok)throw new Error(`HTTP error! status: ${f.status}`);const b=f.headers.get("Content-Type");return b!=null&&b.includes("application/json")?h.value=await f.json():h.value=await f.text(),h.value}catch(e){throw t.value=e.message||"Unknown error",e}finally{c.value=!1}}}}const Oe={key:0,class:"presentation"},Ue={class:"content"},Xe={key:1,class:"empty"},Ye=T({__name:"MaterialCore",props:{material:{},onDocumentLoaded:{type:Function}},setup(h){const t=R(),c=re();Y();const p=z(t),{data:o,loading:i,request:v}=Be(),a=h,r=ee({document:"<p>PLEASE WAIT A MOMENT</p>"}),e=()=>{if(!a.material.sources.length)return;const f=new DOMParser().parseFromString(r.document,"text/html");Array.from(f.querySelectorAll("[data-bs-toggle='popover']")).forEach((_,k)=>{if(!a.material.sources[k]){console.error("본문 속 팝오버의 개수와 출처 배열의 개수가 다릅니다.");return}_.setAttribute("title","자료 출처"),_.setAttribute("data-bs-content",w.linkify(a.material.sources[k])),_.innerText=`[${k+1}]`}),r.document=f.body.innerHTML},u=async()=>{if(a.material){const f=p.getUrlPath(a.material);await v({url:`/assets${f}/document.html?${Date.now()}`,contentType:"text/html"});const b=ie.get(j.unlockPasswordCookieName),_=window.location.hostname==="localhost";if(a.material.locked&&b&&!_){const k=new de(b,j.salt,j.iv);o.value=await k.decrypt(o.value).catch(A=>(console.error({err:A,message:"문서를 복호화 할 수 없습니다."}),null))}r.document=w.linkify(o.value),e()}ue(()=>{a.onDocumentLoaded()}),c.updateSiteTitle(w.extractText(a.material.title))};return le(()=>{u()}),X(()=>{c.updateSiteTitle()}),ce(()=>t.path,()=>{u()}),(f,b)=>(n(),l("div",{class:O(["material-core",{skeleton:g(i)}])},[g(t).query.mode==="presentation"&&!g(i)?(n(),l("div",Oe,[$(Fe,{material:a.material,document:r.document},null,8,["material","document"])])):M("",!0),s("div",Ue,[r.document?(n(),I(ae,{key:0,document:r.document,skeleton:g(i)},null,8,["document","skeleton"])):(n(),l("div",Xe,"이 문서에는 내용이 없습니다."))])],2))}}),Ke=E(Ye,[["__scopeId","data-v-0fbc9696"]]),ze={class:"wrapper"},Ve={class:"title"},Ge={class:"title"},Je=T({__name:"MaterialNavigation",props:{material:{}},setup(h){const t=h,c=R();Y(),z(c);const p=F(()=>{var a,r;const v=[];if((r=(a=t.material)==null?void 0:a.parent)!=null&&r.children){const e=ve.getTag(c);t.material.parent.children.forEach(u=>{(!e||u.tags.includes(e))&&v.push(u)})}return v}),o=F(()=>{var r;let v=null;const a=p.value;for(let e=0;e<a.length;e++)if(a[e].id===((r=t.material)==null?void 0:r.id)&&a[e-1]){v=a[e-1];break}return v}),i=F(()=>{var r;let v=null;const a=p.value;for(let e=0;e<a.length;e++)if(a[e].id===((r=t.material)==null?void 0:r.id)&&a[e+1]){v=a[e+1];break}return v});return(v,a)=>{const r=K("router-link");return n(),l("div",{class:O(["material-navigation",{both:g(o)&&g(i)}])},[s("div",ze,[g(o)?(n(),I(r,{key:0,to:g(o).url||"",class:"item prev",title:g(o).title},{default:H(()=>[a[0]||(a[0]=s("div",{class:"label"},[s("img",{src:me,alt:"이전"}),s("span",null,"이전")],-1)),s("div",Ve,q(g(w).extractText(g(o).title)),1)]),_:1},8,["to","title"])):M("",!0),g(i)?(n(),I(r,{key:1,to:g(i).url,class:"item next",title:g(i).title},{default:H(()=>[a[1]||(a[1]=s("div",{class:"label"},[s("img",{src:pe,alt:"다음"}),s("span",null,"다음")],-1)),s("div",Ge,q(g(w).extractText(g(i).title)),1)]),_:1},8,["to","title"])):M("",!0)])],2)}}}),Qe=E(Je,[["__scopeId","data-v-edc97d56"]]),We={class:"material-above"},Ze={class:"back"},et={class:"wrapper"},tt={class:"dates"},st=["title"],W="?mode=presentation",nt=T({__name:"MaterialAbove",props:{material:{}},setup(h){const t=h,c=Z(),p=(e,u)=>{e==="F9"&&!u&&c.push(W)},o=e=>{p(e.key,e.altKey)},i=y(()=>{const e={title:"강의 자료",url:"/materials"};return t.material.parent&&(e.title=t.material.parent.title,e.url=t.material.parent.url),e}),v=y(()=>t.material.created?t.material.updated?w.getHumanReadableDate(t.material.updated)+" 업데이트됨":w.getHumanReadableDate(t.material.created)+" 생성됨":"(N/A)"),a=y(()=>{if(t.material.created){const e=[`생성: ${t.material.created}`];return t.material.updated&&e.push(`업데이트: ${t.material.created}`),e.join(" | ")}}),r=e=>{e.data.type==="keyup"&&p(e.data.key,e.data.altKey)};return U(()=>{document.addEventListener("keyup",o),window.addEventListener("message",r)}),X(()=>{document.removeEventListener("keyup",o),window.removeEventListener("message",r)}),(e,u)=>{const f=K("router-link");return n(),l("div",We,[s("div",Ze,[$(f,{to:i.value.url},{default:H(()=>[u[0]||(u[0]=s("img",{src:_e,alt:"뒤로가기",title:"뒤로가기"},null,-1)),s("span",null,q(i.value.title),1)]),_:1},8,["to"])]),s("div",et,[s("div",tt,[s("span",{title:a.value},q(v.value),9,st),t.material.presentation?(n(),l(S,{key:0},[u[2]||(u[2]=s("span",{class:"bar"},null,-1)),$(f,{to:W},{default:H(()=>u[1]||(u[1]=[te("발표(F9)")])),_:1})],64)):M("",!0)]),$(he,{title:g(w).extractText(t.material.title),desc:t.material.desc},null,8,["title","desc"])])])}}}),at=E(nt,[["__scopeId","data-v-89bf0324"]]),ot={class:"material"},rt={class:"container"},lt={class:"above",ref:"aboveRef"},ct={key:0,class:"list"},it={key:1,class:"detail"},ut={class:"main",ref:"mainRef"},dt={class:"core",ref:"coreRef"},mt={key:0,class:"sources"},pt={key:1,class:"references"},_t={key:1,class:"empty"},vt={key:2,class:"login"},ht={class:"navigation"},ft={key:0,class:"materials",ref:"materialsRef"},gt={key:1,class:"empty"},yt=T({__name:"MaterialDetail",setup(h){const t=R(),c=Y(),p=z(t),o=ee({contentLoaded:!1}),i=y(()=>{var _;return!((_=e.value)!=null&&_.locked)||c.admin}),v=y(()=>{var _;return(_=t.params.id1)==null?void 0:_.toString()}),a=y(()=>{var _;return(_=t.params.id2)==null?void 0:_.toString()}),r=y(()=>{var _;return(_=t.params.id3)==null?void 0:_.toString()}),e=y(()=>p.get(v.value,a.value,r.value)),u=y(()=>{var _,k;return((k=(_=e.value)==null?void 0:_.parent)==null?void 0:k.children)||[]}),f=y(()=>{if(t.query.tag)return window.decodeURIComponent(t.query.tag.toString())}),b=()=>{o.contentLoaded=!0};return(_,k)=>{var C;const A=K("router-link");return n(),l("div",ot,[s("div",rt,[e.value?(n(),l(S,{key:0},[s("div",lt,[$(at,{material:e.value},null,8,["material"])],512),e.value.children.length?(n(),l("div",ct,[$(J,{materials:e.value.children,tag:f.value},null,8,["materials","tag"])])):(n(),l("div",it,[s("div",ut,[i.value?(n(),l(S,{key:0},[s("div",dt,[$(Ke,{material:e.value,onDocumentLoaded:b},null,8,["material"])],512),e.value.sources.length?(n(),l("div",mt,[$(se,{sources:e.value.sources},null,8,["sources"])])):M("",!0),(C=e.value.references)!=null&&C.length?(n(),l("div",pt,[$(ne,{references:e.value.references},null,8,["references"])])):M("",!0)],64)):e.value.children.length?(n(),l("div",vt,[$(A,{to:g(c).getLoginUrl(g(t),!0)},{default:H(()=>k[0]||(k[0]=[te("로그인")])),_:1},8,["to"]),k[1]||(k[1]=s("span",null,"이 필요합니다.",-1))])):(n(),l("div",_t," 세부 강의가 없습니다. ")),s("div",ht,[$(Qe,{material:e.value},null,8,["material"])])],512),o.contentLoaded&&u.value.length?(n(),l("div",ft,[$(J,{materials:u.value},null,8,["materials"])],512)):M("",!0)]))],64)):(n(),l("div",gt,"접근 가능한 데이터가 없습니다."))])])}}}),St=E(yt,[["__scopeId","data-v-21a6c093"]]);export{St as default};
