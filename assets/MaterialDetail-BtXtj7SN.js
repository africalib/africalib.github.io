import{d as w,c as d,e,F as I,r as F,t as A,g as f,o as l,_ as E,n as B,h as O,b,u as P,i as X,j as C,T as se,f as y,k as $,l as K,m as q,p as J,q as ae,s as Q,v as oe,w as ne,x as re,y as R,z as le,A as N,B as D,C as W,D as ce,E as ie,G as ue,H as de}from"./index-BrPWZeVC.js";import{u as Y,M as U}from"./material-gX5Th3O6.js";import{T as me}from"./Tags-BizfizwX.js";import{c as x}from"./commonLib-B4LiHA7t.js";import{C as pe}from"./CryptoHelper-m6j8gmxG.js";import{_ as _e,a as ve,b as he}from"./common.arrow.left-TSorRx6s.js";import{A as fe}from"./Above-Dlwh8XA_.js";import"./Panel-By7etLJl.js";const ge={class:"common-sources"},ye={class:"items"},ke={class:"item"},be=["innerHTML"],$e=w({__name:"MaterialSources",props:{sources:{}},setup(p){const t=p;return(i,_)=>(l(),d("div",ge,[_[0]||(_[0]=e("div",{class:"subject"},"자료 출처",-1)),e("div",ye,[(l(!0),d(I,null,F(t.sources,(v,u)=>(l(),d("div",ke,[e("span",null,"["+A(u+1)+"] ",1),e("span",{innerHTML:f(x).linkify(v)},null,8,be)]))),256))])]))}}),Z=E($e,[["__scopeId","data-v-3b532ca9"]]),Se={class:"common-references"},xe={class:"items"},Te={class:"item"},Me=w({__name:"MaterialReferences",props:{references:{}},setup(p){const t=p;return(i,_)=>(l(),d("div",Se,[_[0]||(_[0]=e("div",{class:"subject"},"참고 자료",-1)),e("div",xe,[(l(!0),d(I,null,F(t.references,v=>(l(),d("div",Te,[e("span",null,A(v),1)]))),256))])]))}}),ee=E(Me,[["__scopeId","data-v-9a0696c5"]]),we=["innerHTML"],Le=w({__name:"DocumentContent",props:{document:{},skeleton:{type:Boolean}},setup(p){const t=p;return(i,_)=>(l(),d("div",{class:B(["document-content",{skeleton:t.skeleton}])},[e("div",{innerHTML:t.document,ref:"contentRef"},null,8,we)],2))}}),te=E(Le,[["__scopeId","data-v-af73dc37"]]),Ee="/assets/images/component.document.presentation.slide.first.svg",Ae="/assets/images/component.material.presentation.finish.svg",j=w({__name:"DocumentPrompt",props:{content:{}},setup(p){const t=p;return O(()=>{console.info(t.content.replace(/\n{3,}/g,`

`))}),(i,_)=>null}}),Ce={class:"presentation"},Ie={class:"slides"},He={key:0,class:"slide start"},De={class:"container"},Pe={class:"slide-item"},qe=["innerHTML"],Re={key:1,class:"slide finish"},Ne={class:"container"},je={key:0,class:"slide"},Fe={class:"container"},G="no-overflow",Be=w({__name:"MaterialPresentation",props:{material:{},document:{}},setup(p){const t={touchStartX:0,touchStartY:0},i=p,_=P(),v=K(),u=`이렇게 해서 ${x.extractText(i.material.title)}에 대해 알아봤습니다. 수고하셨습니다!`,c=b(()=>i.material.title.replace(/\*\*(.*?)\*\*/g,"<b>$1</b>")),m=b(()=>{const s=[i.material.desc];return o.value.length===0&&n.value.length===1&&s.push(n.value[0]),s.join("")}),o=b(()=>{const s=new DOMParser().parseFromString(i.document,"text/html");return Array.from(s.querySelectorAll(".slide-item")).map(r=>r.outerHTML)}),n=b(()=>{const s=[],r={},h=new DOMParser().parseFromString(i.document,"text/html");Array.from(h.querySelectorAll(".slide-text")).forEach(L=>{const H=L.getAttribute("data-slide-text-group");H&&(!r[H]&&(r[H]=[]),r[H].push(x.replaceAll(L.outerText,"  ","").trim()))});for(let L in r)s.push(r[L].join(`
`));return s}),a=b(()=>{var s;return window.Number.parseInt(((s=_.query.idx)==null?void 0:s.toString())||"0")}),k=b(()=>o.value.length+1),g=s=>{const r=x.renew(_.query);let h=a.value+s;h<0?h=0:h>k.value&&(h=k.value),a.value!==h&&(r.idx=h.toString(),v.push({query:r}))},M=s=>{switch(s.key){case"ArrowLeft":!s.altKey&&g(-1);break;case"ArrowRight":!s.altKey&&g(1);break;case"F9":case"Escape":v.push({query:void 0});break}},S=s=>{const r=s.touches[0];t.touchStartX=r.clientX,t.touchStartY=r.clientY},T=s=>{const r=s.changedTouches[0],h=r.clientX,z=r.clientY,L=h-t.touchStartX,H=z-t.touchStartY;Math.abs(L)>Math.abs(H)&&Math.abs(L)>50&&(L>0?g(-1):g(1))};return O(()=>{document.addEventListener("keyup",M),document.addEventListener("touchstart",S),document.addEventListener("touchend",T),document.body.classList.add(G)}),X(()=>{document.removeEventListener("keyup",M),document.removeEventListener("touchstart",S),document.removeEventListener("touchend",T),document.body.classList.remove(G)}),(s,r)=>(l(),C(se,{to:"body"},[e("div",Ce,[e("div",Ie,[a.value===0?(l(),d("div",He,[e("div",De,[e("figure",Pe,[r[0]||(r[0]=e("img",{src:Ee,alt:"코딩",loading:"lazy"},null,-1)),e("figcaption",null,[e("span",{innerHTML:c.value},null,8,qe),y(j,{content:m.value},null,8,["content"])])])])])):a.value===k.value?(l(),d("div",Re,[e("div",Ne,[r[1]||(r[1]=e("figure",{class:"slide-item"},[e("img",{src:Ae,alt:"하이파이브",class:"mh-400",loading:"lazy"}),e("figcaption",null,[e("b",null,"이상 끝. "),e("span",null,"수고하셨습니다!")])],-1)),i.material.sources.length?(l(),C(Z,{key:0,class:"w-100 mb-3",sources:i.material.sources},null,8,["sources"])):$("",!0),i.material.references.length?(l(),C(ee,{key:1,class:"w-100",references:i.material.references},null,8,["references"])):$("",!0),y(j,{content:u})])])):(l(!0),d(I,{key:2},F(o.value.length,h=>(l(),d(I,null,[a.value===h?(l(),d("div",je,[e("div",Fe,[y(te,{document:o.value[h-1]},null,8,["document"]),y(j,{content:n.value[h-1]||""},null,8,["content"])])])):$("",!0)],64))),256))])])]))}}),Oe=E(Be,[["__scopeId","data-v-56f6ed8a"]]);function Xe(){const p=q(null),t=q(null),i=q(!1);return{data:p,error:t,loading:i,request:async({url:v,method:u="GET",body:c,contentType:m="application/json",...o})=>{i.value=!0,t.value=null;try{const n={"Content-Type":m,...o.headers||{}},a={method:u,headers:n,...o};c&&(a.body=m==="application/json"?JSON.stringify(c):c);const k=await fetch(v,a);if(!k.ok)throw new Error(`HTTP error! status: ${k.status}`);const g=k.headers.get("Content-Type");return g!=null&&g.includes("application/json")?p.value=await k.json():p.value=await k.text(),p.value}catch(n){throw t.value=n.message||"Unknown error",n}finally{i.value=!1}}}}const Ye={class:"presentation"},ze={class:"content"},Ue={key:1},Ge=w({__name:"MaterialCore",props:{material:{},onDocumentLoaded:{type:Function}},setup(p){const t=P(),i=J(),_=ae(),v=Y(t),{data:u,loading:c,request:m}=Xe(),o=p,n=Q({document:"<p>PLEASE WAIT A MOMENT</p>",accessible:!1}),a=()=>{if(!o.material.sources.length)return;const g=new DOMParser().parseFromString(n.document,"text/html");Array.from(g.querySelectorAll("[data-bs-toggle='popover']")).forEach((S,T)=>{if(!o.material.sources[T]){console.error("본문 속 팝오버의 개수와 출처 배열의 개수가 다릅니다.");return}S.setAttribute("title","자료 출처"),S.setAttribute("data-bs-content",x.linkify(o.material.sources[T])),S.innerText=`[${T+1}]`}),n.document=g.body.innerHTML},k=async()=>{const g=window.location.hostname==="localhost";if(n.accessible=o.material.locked?_.admin:!0,n.accessible){const M=v.getUrlPath(o.material);await m({url:`/assets${M}/document.html?${Date.now()}`,contentType:"text/html"});const S=re.get(R.unlockPasswordCookieName);if(o.material.locked&&S&&!g){const T=new pe(S,R.salt,R.iv);u.value=await T.decrypt(u.value).catch(s=>(console.error({err:s,message:"문서를 복호화 할 수 없습니다."}),null))}n.document=x.linkify(u.value),a()}le(()=>{o.onDocumentLoaded()}),i.updateSiteTitle(x.extractText(o.material.title))};return oe(()=>{k()}),X(()=>{i.updateSiteTitle()}),ne(()=>t.path,()=>{k()}),(g,M)=>(l(),d("div",{class:B(["material-core",{skeleton:f(c)}])},[e("div",Ye,[f(t).query.mode==="presentation"&&!f(c)&&n.accessible?(l(),C(Oe,{key:0,material:o.material,document:n.document},null,8,["material","document"])):$("",!0)]),e("div",ze,[n.accessible?(l(),C(te,{key:0,document:n.document,skeleton:f(c)},null,8,["document","skeleton"])):(l(),d("div",Ue,"조회 가능한 문서가 없습니다."))])],2))}}),Ve=E(Ge,[["__scopeId","data-v-38507240"]]),Ke={class:"wrapper"},Je={class:"title"},Qe={class:"title"},We=w({__name:"MaterialNavigation",props:{material:{}},setup(p){const t=p,i=P(),_=Y(i),v=N(()=>{var o;const m=[];return t.material&&((o=t.material.parent)==null||o.children.forEach(n=>{const a=_.getUrlPath(n);m.push({id:n.id,title:x.extractText(n.title),url:a})})),m}),u=N(()=>{var n;let m=null;const o=v.value;for(let a=0;a<o.length;a++)if(o[a].id===((n=t.material)==null?void 0:n.id)){m=o[a-1];break}return m}),c=N(()=>{var n;let m=null;const o=v.value;for(let a=0;a<o.length;a++)if(o[a].id===((n=t.material)==null?void 0:n.id)){m=o[a+1];break}return m});return(m,o)=>{const n=W("router-link");return l(),d("div",{class:B(["material-navigation",{both:f(u)&&f(c)}])},[e("div",Ke,[f(u)?(l(),C(n,{key:0,to:f(u).url||"",class:"item prev",title:f(u).title},{default:D(()=>[o[0]||(o[0]=e("div",{class:"label"},[e("img",{src:_e,alt:"이전"}),e("span",null,"이전")],-1)),e("div",Je,A(f(u).title),1)]),_:1},8,["to","title"])):$("",!0),f(c)?(l(),C(n,{key:1,to:f(c).url,class:"item next",title:f(c).title},{default:D(()=>[o[1]||(o[1]=e("div",{class:"label"},[e("img",{src:ve,alt:"다음"}),e("span",null,"다음")],-1)),e("div",Qe,A(f(c).title),1)]),_:1},8,["to","title"])):$("",!0)])],2)}}}),Ze=E(We,[["__scopeId","data-v-1831093f"]]),et={class:"material-above"},tt={class:"back"},st={class:"bottom"},at=["title"],ot=["title"],V="?mode=presentation",nt=w({__name:"MaterialAbove",props:{material:{}},setup(p){const t=p,i=K(),_=u=>{u.key==="F9"&&i.push(V)},v=b(()=>{const u={title:"강의 자료",url:"/materials"};return t.material.parent&&(u.title=t.material.parent.title,u.url=t.material.parent.url),u});return O(()=>{document.addEventListener("keyup",_)}),X(()=>{document.removeEventListener("keyup",_)}),(u,c)=>{const m=W("router-link");return l(),d("div",et,[e("div",tt,[y(m,{to:v.value.url},{default:D(()=>[c[0]||(c[0]=e("img",{src:he,alt:"뒤로가기",title:"뒤로가기"},null,-1)),e("span",null,A(v.value.title),1)]),_:1},8,["to"])]),y(fe,{title:f(x).extractText(t.material.title),desc:t.material.desc},null,8,["title","desc"]),e("div",st,[e("span",{title:t.material.created}," 생성: "+A(f(x).getHumanReadableDate(t.material.created)),9,at),t.material.created!==t.material.updated?(l(),d(I,{key:0},[c[1]||(c[1]=e("span",{class:"bar"},null,-1)),e("span",{title:t.material.updated}," 수정: "+A(f(x).getHumanReadableDate(t.material.updated)),9,ot)],64)):$("",!0),t.material.presentation?(l(),d(I,{key:1},[c[3]||(c[3]=e("span",{class:"bar"},null,-1)),y(m,{to:V},{default:D(()=>c[2]||(c[2]=[ce("발표(F9)")])),_:1})],64)):$("",!0)])])}}}),rt=E(nt,[["__scopeId","data-v-607f8081"]]),lt={class:"material"},ct={class:"container"},it={class:"above"},ut={key:0,class:"list"},dt={class:"tags"},mt={key:1,class:"detail"},pt={class:"main"},_t={class:"core",ref:"coreRef"},vt={key:0,class:"sources"},ht={key:1,class:"references"},ft={class:"navigation"},gt=w({__name:"MaterialDetail",setup(p){const t=P(),i=J(),_=ie(),v=Y(t),u=ue("materialsRef"),c=Q({contentLoaded:!1}),m=b(()=>{var s;return(s=t.params.id1)==null?void 0:s.toString()}),o=b(()=>{var s;return(s=t.params.id2)==null?void 0:s.toString()}),n=b(()=>{var s;return(s=t.params.id3)==null?void 0:s.toString()}),a=b(()=>v.get(m.value,o.value,n.value)),k=b(()=>{var s,r;return((r=(s=a.value)==null?void 0:s.parent)==null?void 0:r.children)||[]}),g=b(()=>{var r;const s=new Set;return s.add(void 0),(r=v.get(m.value))==null||r.tags.forEach(h=>s.add(h)),s}),M=b(()=>{if(t.query.tag)return window.decodeURIComponent(t.query.tag.toString())}),S=s=>{var r;i.windowSize.width<=1399||(r=u.value)==null||r.scrollTo({top:s-u.value.offsetTop,behavior:"smooth"})},T=()=>{c.contentLoaded=!0};return(s,r)=>{var h;return l(),d("div",lt,[e("div",ct,[a.value?(l(),d(I,{key:0},[e("div",it,[y(rt,{material:a.value},null,8,["material"])]),a.value.children.length?(l(),d("div",ut,[e("div",dt,[y(me,{tags:g.value,tag:M.value},null,8,["tags","tag"])]),y(U,{materials:a.value.children,tag:M.value},null,8,["materials","tag"])])):(l(),d("div",mt,[e("div",pt,[e("div",_t,[y(Ve,{material:a.value,onDocumentLoaded:T},null,8,["material"])],512),!a.value.locked&&a.value.sources.length?(l(),d("div",vt,[y(Z,{sources:a.value.sources},null,8,["sources"])])):$("",!0),!a.value.locked&&((h=a.value.references)!=null&&h.length)?(l(),d("div",ht,[y(ee,{references:a.value.references},null,8,["references"])])):$("",!0),e("div",ft,[y(Ze,{material:a.value},null,8,["material"])])]),c.contentLoaded?(l(),d("div",{key:0,class:"materials",ref_key:"materialsRef",ref:u,style:de({height:f(_).mainHeight})},[y(U,{materials:k.value,onScrollable:S},null,8,["materials"])],4)):$("",!0)]))],64)):$("",!0)])])}}}),wt=E(gt,[["__scopeId","data-v-28968730"]]);export{wt as default};
